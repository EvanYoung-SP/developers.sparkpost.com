<div id="changelog">
<h1>Momentum 3.x Change Log</h1>

<table class="sidebar">
	<tr><th>Quick Links</th></tr>
  <tr><td><a href="#3.6.25">Momentum 3.6.25 released on 2016-08-11</a></td></tr>
  <tr><td><a href="#3.6.23">Momentum 3.6.23 released on 2016-04-28</a></td></tr>
  <tr><td><a href="#3.6.22">Momentum 3.6.22 released on 2016-04-04</a></td></tr>
  <tr><td><a href="#3.6.21">Momentum 3.6.21 released on 2016-03-24</a></td></tr>
  <tr><td><a href="#3.6.18">Momentum 3.6.18 released on 2016-01-12</a></td></tr>
  <tr><td><a href="#3.6.17">Momentum 3.6.17 released on 2015-12-16</a></td></tr>
  <tr><td><a href="#3.6.16">Momentum 3.6.16 released on 2015-12-10</a></td></tr>
  <tr><td><a href="#3.6.14">Momentum 3.6.14 released on 2015-09-21</a></td></tr>
  <tr><td><a href="#3.6.13">Momentum 3.6.13 released on 2015-09-01</a></td></tr>
  <tr><td><a href="#3.6.12">Momentum 3.6.12 released on 2015-08-04</a></td></tr>
  <tr><td><a href="#3.6.11">Momentum 3.6.11 released on 2015-06-10</a></td></tr>
  <tr><td><a href="#3.6.10">Momentum 3.6.10 released on 2015-05-12</a></td></tr>
  <tr><td><a href="#3.6.9">Momentum 3.6.9 released on 2015-04-07</a></td></tr>
  <tr><td><a href="#3.6.8">Momentum 3.6.8 released on 2015-02-11</a></td></tr>
  <tr><td><a href="#3.6.7">Momentum 3.6.7 released on 2014-12-23</a></td></tr>
  <tr><td><a href="#3.6.6">Momentum 3.6.6 released on 2014-11-4</a></td></tr>
  <tr><td><a href="#3.6.5">Momentum 3.6.5 released on 2014-10-14</a></td></tr>
  <tr><td><a href="#3.6.4">Momentum 3.6.4 released on 2014-08-14</a></td></tr>
  <tr><td><a href="#3.6.3">Momentum 3.6.3 released on 2014-07-01</a></td></tr>
  <tr><td><a href="#3.6.2">Momentum 3.6.2 released on 2014-05-02</a></td></tr>
  <tr><td><a href="#3.6.1">Momentum 3.6.1 released on 2014-03-06</a></td></tr>
  <tr><td><a href="#3.6.0">Momentum 3.6.0 released on 2013-09-30</a></td></tr>
	<tr><td><a href="#3.5.11">Momentum 3.5.11 released on 2014-12-15</a></td></tr>
	<tr><td><a href="#3.5.10">Momentum 3.5.10 released on 2014-09-08</a></td></tr>
	<tr><td><a href="#3.5.9">Momentum 3.5.9 released on 2014-03-21</a></td></tr>
	<tr><td><a href="#3.5.8">Momentum 3.5.8 released on 2014-01-08</a></td></tr>
	<tr><td><a href="#3.5.7">Momentum 3.5.7 released on 2013-10-16</a></td></tr>
	<tr><td><a href="#3.5.6">Momentum 3.5.6 released on 2013-10-16</a></td></tr>
	<tr><td><a href="#3.5.5">Momentum 3.5.5 released on 2013-08-14</a></td></tr>
	<tr><td><a href="#3.5.4">Momentum 3.5.4 released on 2013-07-02</a></td></tr>
	<tr><td><a href="#3.5.3">Momentum 3.5.3 released on 2013-05-13</a></td></tr>
	<tr><td><a href="#3.5.2">Momentum 3.5.2 released on 2013-03-26</a></td></tr>
	<tr><td><a href="#3.5.1">Momentum 3.5.1 released on 2013-01-15</a></td></tr>
	<tr><td><a href="#3.3.3">Momentum 3.3.3 released on 2012-10-16</a></td></tr>
	<tr><td><a href="#3.4.2-patch1">Momentum 3.4.2-patch1 released on 2012-07-05</a></td></tr>
	<tr><td><a href="#3.5.0">Momentum 3.5.0 released on 2012-06-26</a></td></tr>
	<tr><td><a href="#3.4.2">Momentum 3.4.2 released on 2012-04-02</a></td></tr>
	<tr><td><a href="#3.4.1">Momentum 3.4.1 released on 2012-03-07</a></td></tr>
	<tr><td><a href="#3.4.0">Momentum 3.4.0 released on 2012-02-06</a></td></tr>
	<tr><td><a href="#3.3.2">Momentum 3.3.2 released on 2011-11-01</a></td></tr>
	<tr><td><a href="#3.3.1">Momentum 3.3.1 released on 2011-10-10</a></td></tr>
	<tr><td><a href="#3.3.0">Momentum 3.3.0 released on 2011-09-26</a></td></tr>
	<tr><td><a href="#3.2.5">Momentum 3.2.5 released on 2011-12-19</a></td></tr>
	<tr><td><a href="#3.2.3">Momentum 3.2.3 released on 2011-08-10</a></td></tr>
	<tr><td><a href="#3.2.2">Momentum 3.2.2 released on 2011-07-20</a></td></tr>
	<tr><td><a href="#3.2.1-patch1">Momentum 3.2.1-patch1 released on 2011-06-14</a></td></tr>
	<tr><td><a href="#3.2.1">Momentum 3.2.1 released on 2011-06-01</a></td></tr>
	<tr><td><a href="#3.2.0">Momentum 3.2.0 released on 2011-05-16</a></td></tr>
	<tr><td><a href="#3.1.7">Momentum 3.1.7 released on 2011-12-19</a></td></tr>
	<tr><td><a href="#3.1.6">Momentum 3.1.6 released on 2011-04-20</a></td></tr>
	<tr><td><a href="#3.1.5">Momentum 3.1.5 released on 2011-04-14</a></td></tr>
	<tr><td><a href="#3.1.4">Momentum 3.1.4 released on 2011-04-11</a></td></tr>
	<tr><td><a href="#3.1.3">Momentum 3.1.3 released on 2011-02-04</a></td></tr>
	<tr><td><a href="#3.1.2">Momentum 3.1.2 released on 2011-01-27</a></td></tr>
	<tr><td><a href="#3.1.1">Momentum 3.1.1 released on 2011-01-17</a></td></tr>
	<tr><td><a href="#3.1.0">Momentum 3.1.0 released on 2010-12-22</a></td></tr>
	<tr><td><a href="#3.0.28.1">Momentum 3.0.28.1 Sending released on 2010-11-03</a></td></tr>
	<tr><td><a href="#3.0.28">Momentum 3.0.28 Sending released on 2010-10-18</a></td></tr>
	<tr><td><a href="#3.0.26">Momentum 3.0.26 Sending released on 2010-09-01</a></td></tr>
	<tr><td><a href="#3.0.24">Momentum 3.0.24 Sending released on 2010-06-23</a></td></tr>
	<tr><td><a href="#3.0">Momentum Receiving 3.0 EA released on 2010-03-15</a></td></tr>
	<tr><td><a href="#3.0.22">Momentum 3.0.22 released on 2010-03-09</a></td></tr>
	<tr><td><a href="#3.0.21">Momentum 3.0.21 (Sending) released on 2010-02-04</a></td></tr>
	<tr><td><a href="#3.0.20">Momentum 3.0.20 (Sending) released on 2010-02-01</a></td></tr>
	<tr><td><a href="#3.0.19">Momentum 3.0.19 released on 2009-12-14</a></td></tr>
	<tr><td><a href="#3.0.18">Momentum 3.0.18 released on 2009-11-18</a></td></tr>
	<tr><td><a href="#3.0.17">Momentum 3.0.17 released on 2009-11-06</a></td></tr>
	<tr><td><a href="#3.0.16">Momentum 3.0.16 released on 2009-09-18</a></td></tr>
	<tr><td><a href="#3.0.15">Momentum 3.0.15 released on 2009-08-10</a></td></tr>
	<tr><td><a href="#3.0.14">Momentum 3.0.14 released on 2009-07-15</a></td></tr>
	<tr><td><a href="#3.0.13">Momentum 3.0.13 released on 2009-07-02</a></td></tr>
	<tr><td><a href="#3.0.12">Momentum 3.0.12 released on 2009-06-05</a></td></tr>
	<tr><td><a href="#3.0.11">Delivery Manager 3.0.11 released on 2009-05-12</a></td></tr>
</table>
<h2><a name="3.6.25">Momentum 3.6.25 released on 2016-08-11</a></h2>
<ul>
<li> Defect ticket: MO-5341 - Fix for DKIM signing failing when transmission API injections required dot stuffing.</li>
<li> Defect ticket: MO-5459 - Change default APNS message expiration from 60 seconds to 7 days.</li>
<li> Defect ticket: MO-5555 - Fix for 'content-type' header longer than 256 bytes causing Momentum to crash.</li>
<li> Defect ticket: MR-1486 - Update DNS cache to improve SPF module and SuperCharger interoperability.</li>
<li> Defect ticket: MO-5340 - Fix race condition when aggressive AD rules update same optval in two threads at once.</li>
<li> Defect ticket: MO-5413 - Prevent crash when hook for Lua module validate_dealloc returns an error.</li>
<li> Feature ticket: MO-5437 - Update the mobility packages versioning to facilitate upgrading across major versions.</li>
<li> Defect ticket: MO-5466 - Fixes for trace files generated during regression testing.</li>
<li> Defect ticket: MO-5532 - Fix for dkim_validate on an invalid domain name can cause momentum abort.</li>
<li> Defect ticket: MO-5742 - Fix missing queue size support in SNMP when SuperCharger is enabled.</li>
<li> Feature ticket: MO-3502 - Make LevelDB the sole supported backing store for AD. (Riak is no longer supported as AD backstore).</li>
<li> Feature ticket: MO-3986 - Provide immortal Lua variables that survive "config reload"</li>
<li> Feature ticket: MO-5167 - Enhance static route module to work for Mobile Push.</li>
<li> Feature ticket: MO-5347 - Upgrade gnutls to 3.3.22 to support Application-Layer Protocol Negotiation (ALPN).</li>
<li> Defect ticket: MO-5361 - Fix potential inbound_audit deadlock cases.</li>
<li> Defect ticket: MO-5417 - Fix conflict between Sieve++ function ec_maildir and maildir's post-init.</li>
<li> Feature ticket: MO-5451 - Improved logging from the httpcnt and generic_delivery modules</li>
<li> Feature ticket: MO-5463 - Improve gdb's capability to debug ecelerity start-up issues.</li>
<li> Defect ticket: MO-5476 - Provide msys.http.client handling HTTP response headers case-insensitive look-up.</li>
<li> Defect ticket: MO-5634 - Change 'No valid from' message in spf_validate from ERROR level to INFO to reduce unneeded logging.</li>
<li> Defect ticket: MO-5673 - Fix static_routes module's overuse of dns_refresh_hosts that could quickly lead to OOM.</li>
<li> Defect ticket: MO-5765 - Fix QP encoding line length too long (introduced in MO-5341 fix)</li>
<li> Feature ticket: MO-5806 - Update to latest lua packages.</li>
<li> Feature ticket: MR-1460 - Add Binary SMS Capability.</li>
<li> Feature ticket: PKG-260 - Update jemalloc to fix dependency.</li>
</ul>

<h2><a name="3.6.23">Momentum 3.6.23 released on 2016-04-28</a></h2>
<ul>
<li>Defect ticket: MO-5319 - Fix crash-inducing freed memory usage attempts in APN Push</li>
<li>Defect ticket: MO-5161 - Fix uninitialized memory access in converter.c (valgrind debug reported)</li>
<li>Defect ticket: MO-5158 - Fix invalid memory write upon Push disconnect (valgrind debug reported)</li>
<li>Feature ticket: MO-5155 - Do not set default optional "sound" in APN payload</li>
<li>Defect ticket: MO-5146 - Fix failure to free json object when APN delivery fails</li>
<li>Feature ticket: MO-5113 - Update GCM module to extract the "To" field to get the device ID</li>
<li>Feature ticket: MO-5104 - Update APN module to increase supported Push payload size from 256 to 2048 bytes</li>
<li>Defect ticket: MO-4892 - Add NULL usage checks in adaptive_backstore_riak</li>
</ul>

<h2><a name="3.6.22">Momentum 3.6.22 released on 2016-04-04</a></h2>
<ul>
<li>Defect ticket: MR-1459 - Upgrade BEIK to patch level 245</li>
</ul>
<h2><a name="3.6.21">Momentum 3.6.21 released on 2016-03-24</a></h2>
<ul>
<li>Defect ticket: MO-5156 - Make alerting module run on own threadpool to avoid contention in the CPU threadpool</li>
<li>Defect ticket: MO-5145 - Add %vctx_mess{x} macro support for  apn_logger</li>
<li>Defect ticket: MO-5130 - Prevent crash due to connection closed during TLS handshake</li>
<li>Defect ticket: MO-5071 - Allow domain specific bounce classifications to work with multi-threading</li>
<li>Defect ticket: MO-4982 - Drop adaptive_sweep_rule bounce on bc:24; only action on code 10</li>
<li>Feature ticket: MO-4800 - Update console and UI copyright</li>
<li>Defect ticket: MO-4653 - Fixed watchdog tracing during BEIK scanning</li>
<li>Defect ticket: MO-4101 - Fix High Impact Issues flagged by Coverity</li>
<li>Defect ticket: MR-888 - Limit number of NOOPs processed per message to prevent connection buildup</li>
<li>Defect ticket: MR-1472 - Fix outbound Xclient's peer server return code expectation</li>
<li>Defect ticket: MR-1469 - Fix TLS fall back behavior when sending to Microsoft domains</li>
<li>Defect ticket: MR-1462 - Address msys.idn.to_idn buffer overflow vulnerability</li>
<li>Defect ticket: MR-1453 - Fix SMPP in receiver mode to send deliver_sm_resp</li>
<li>Defect ticket: MR-1389 - Make SMPP protocol ID configurable; confirm proper default value</li>
<li>Defect ticket: MR-1366 - Fix the "bursty" nature of SMPP throttles</li>
</ul>
<h2><a name="3.6.20">Momentum 3.6.20 not publicly released - changes are logged within 3.6.21</a></h2>
<ul>
</ul>
<h2><a name="3.6.19">Momentum 3.6.19 not publicly released - changes are logged within 3.6.21</a></h2>
<ul>
</ul>
<h2><a name="3.6.18">Momentum 3.6.18 released on 2016-01-12</a></h2>
<ul>
<li>Feature ticket: MR-1473 - ships ILF logger</li>
<li>Defect ticket: MR-1414 - Fixes empty messages caused by SMPP throttling and SMPP bounce messages</li>
</ul>
<h2><a name="3.6.17">Momentum 3.6.17 released on 2015-12-16</a></h2>
<ul>
<li>Defect ticket: MR-1470 - fixes issue in cert wildcard verification</li> 
</ul>
<h2><a name="3.6.16">Momentum 3.6.16 released on 2015-12-10</a></h2>
<ul>
<li>Defect ticket: MR-1413 - Fixes timing crash in legacy REST API</li>
<li>Defect ticket: MR-644  - Adds logging for client timeouts on inbound SMTP</li>
<li>Defect ticket: MR-122  - Fixes bug where 'message details body' would render the full message details </li>
<li>Defect ticket: MR-1409 - Applies CSAPI hotfix from symantec </li>
<li>Defect ticket: MR-1411 - AV modules goes async properly </li>
<li>Defect ticket: MR-1115 - RFC2822_max_line_length_policy=none was not being respected </li>
<li>Defect ticket: MR-1467 - Recipient count not being passed to cloudmark</li>
</ul>
<h2><a name="3.6.15">Momentum 3.6.15 not publicly released - changes are logged as 3.6.16</a></h2>
<ul>
</ul>
<h2><a name="3.6.14">Momentum 3.6.14 released on 2015-09-21</a></h2>
<ul>
<li>Defect ticket: MR-1415 - Disables auto-replumber by default </li>
<li>Defect ticket: MR-1370 - Updates bundled version of ICU </li>
<li>Defect ticket: MR-1407 - Fixes divide by zero error in cluster throttles module </li>
<li>Defect ticket: MR-1385 - Fixes TLS fallback failures when initialized from Lua</li>
</ul>
<h2><a name="3.6.13">Momentum 3.6.13 released on 2015-09-01</a></h2>
<ul>
<li>Defect ticket: MR-1368 - Updated cidr_server/cidr_cli to allow handling of IPv6 </li>
<li>Defect ticket: MR-9 - Added SMTP server to server authentication </li>
<li>Defect ticket: MR-1381 - Fixed DKIM module race condition </li>
<li>Defect ticket: MR-1260 - Fixed bug when using Curl in LUA </li>
<li>Defect ticket: MR-515 - Added IPv6 blacklist support </li>
<li>Defect ticket: MR-1313 - Fixed illegal memory usage due to unexpected values in custom loggers </li>
</ul>
<h2><a name="3.6.12">Momentum 3.6.12 released on 2015-08-04</a></h2>
<ul>
<li>Defect ticket: MR-1335 - Fixed bug in ipv6_module causing a crash</li>
<li>Defect ticket: MR-1225 - Periodically replumb bindings that have become disconnected.</li>
<li>Defect ticket: MR-1364 - Fixed performance issue when using unbound</li>
<li>Defect ticket: MR-1292 - Add support for converting bewteen UTF-8 and IDN</li>
<li>Defect ticket: MO-4195 - Add feature to prefer IPv6 MX's</li>
<li>Defect ticket: MO-4091 - Add configuration option to prefer IPv6 MX's</li>
<li>Defect ticket: MO-4194 - Move IPv6 support into Core</li>
<li>Defect ticket: MR-1363 - Fix a crash with faulty DNS packets</li>
</ul>
<h2><a name="3.6.11">Momentum 3.6.11 released on 2015-06-10</a></h2>
<ul>
<li>Defect ticket: MR-773 - Fixed high impact issues flagged by coverity</li>
<li>Defect ticket: MR-1299 - Updated Net::SMTP::ESMTP to be compatible with versions of SSL that don’t use SSLv3</li>
<li>Defect ticket: MR-786 - Fixed Top 20 Watched Domains by Deliveries not being shown when not All Bindings are selected</li>
<li>Defect ticket: MR-676 - Removed global suspension based on bounce rate</li>
<li>Defect ticket: MR-1304 - Added unbound as an optional DNS backend replacement</li>
<li>Defect ticket: MR-1352 - Corrected regex matching in Binding Host stanza</li>
</ul>
<h2><a name="3.6.10">Momentum 3.6.10 released on 2015-05-12</a></h2>
<ul>
<li>Defect ticket: MR-1230 - Added Beta IPv6 support for multiple addresses per binding</li>
<li>Defect ticket: MR-1187 - Fix the XCLIENT SMTP response codes and advertising</li>
<li>Defect ticket: MR-1228 - Fix handling of HTTP 100 response code in httpclient module</li>
<li>Defect ticket: MR-1247 - Allow the bounce_classifier_override console command to test against domains</li>
<li>Defect ticket: MR-1316 - Fix RFC2822 parser to correctly handle spaces in comments</li>
</ul>
<h2><a name="3.6.9">Momentum 3.6.9 released on 2015-04-07</a></h2>
<ul>
  <li>Defect ticket: MR-167 - Bounce classifications will now be cached according to rule and domain. The bounce cache is now tunable.</li>
  <li>Defect ticket: MR-1226 - Calling "do_request" in lua without setting a header will no longer throw an error</li>
  <li>Defect ticket: MR-801 - Fixes system crash caused by adaptive delivery setting a retry interval of '0' </li>
  <li>Defect ticket: MR-1248 - Fixes issue where errors in the underlying interface would cause DuraVIP to permenantly unplumb bindings</li>
</ul>
<h2><a name="3.6.8">Momentum 3.6.8 released on 2015-02-11</a></h2>
<ul>
  <li>Defect ticket: MO-3565 - Fixed illegal free in duravip module</li>
  <li>Feature ticket: MR-1133 - Update copyright dates in the UI and ec_console</li>
  <li>Defect ticket: MR-782 - Fixed mask persistence problem in CIDRDB module</li>
  <li>Feature ticket: MR-1149 - Added support for SMTPUTF8 parsing in a RFC2822 header field</li>
  <li>Defect ticket: MR-1168 - Fixed memory corruption issue in the duravip module</li>
  <li>Defect ticket: MR-145 - Fixed memory leak in our Lua bindings</li>
  <li>Defect ticket: MR-315 - Fixed race condition in how we update scripts on config reload</li>
  <li>Defect ticket: MR-71 - Fixed illegal pointer dereference in the CIDRDB module</li>
  <li>Defect ticket: MR-739 - Added support for all RFC-defined FBL headers</li>
  <li>Defect ticket: MR-812 - Fixed issue in how we parse multi-string SPF headers</li>
  <li>Defect ticket: MR-902 - Fixed issue where setting use_wire_rep='false' in Cloudmark will cause false positives</li>
</ul>
<h2><a name="3.6.7">Momentum 3.6.7 released on 2014-12-23</a></h2>
<ul>
<li>Feature ticket: MR-891 - cluster mmove is supercharger compatible</li>
<li>Feature ticket: MR-553 - alias policy is supercharger compatible</li>
<li>Feature ticket: MR-539 - mail loop is supercharger compatible</li>
<li>Feature ticket: MR-538 - delay dsn module is supercharger compatible</li>
<li>Feature ticket: MR-536 - brightmail module is supercharger compatible</li>
<li>Feature ticket: MR-511 - url_ripper policy is supercharger compatible</li>
<li>Feature ticket: MR-510 - as_logger is supercharger compatible</li>
<li>Feature ticket: MR-509 - BEIK is supercharger compatible</li>
<li>Feature ticket: MR-846 - cluster gauges are now supercharger compatible</li>
<li>Fixed ticket: MR-859 - Mailq # (any number) crashes ecelerity</li>
<li>Fixed ticket: MR-884 - typing "xml " into ec_console crashes momentum</li>
<li>Fixed ticket: MR-917 - default ec_fc lock is now a pthread mutex</li>
<li>Fixed ticket: MR-647 - updates scriptlet module to always yield before queuing up an async job</li>
<li>Fixed ticket: MR-897 - fixes issue with ec_console tab completion on the manager</li>
<li>Fixed ticket: MR-1092 - fixes dns system bug that causes scheduler deadlock under supercharger</li>
</ul>
<h2><a name="3.6.6">Momentum 3.6.6 released on 2014-11-4</a></h2>
<ul>
<li>Fixed ticket MR-28: Modifies SPF results to comply with RFC-mandated dispositions</li>
<li>Fixed ticket MR-877: Adds ability to customize which SSL/TLS protocols are used during transmissions, enabling defense against POODLE attacks</li>
<li>Feature ticket MR-229: enabled asynchronous policy hooks in the SMPP module</li>
<li>Feature ticket MR-835: Adds support for DHE ciphers during inbound STARTTLS</li>
</ul>
<h2><a name="3.6.5">Momentum 3.6.5 released on 2014-10-14</a></h2>
<ul>
<li>Fixed ticket MR-662: removes a spurious dependency on msys-cpan-Mail-SpamAssassin from the momentum part of the installer</li>
<li>Fixed ticket MR-3: relaxes the debug level on the 'Throttling...' and 'Couldn't re-summon recycled domain' error messages</li>
<li>Fixed ticket MR-769: increases default expiration date of SVN repo cert to the maximum possible value</li>
<li>Fixed ticket MR-375: updates CSAPI antivirus module to work with the new CSAPI version</li>
<li>Fixed ticket MR-770: fixes TLS verification so that alt names are now checked during hostname verification</li>
<li>Fixed ticket MR-783: ported from 3.5.10, fixes for cloudmark activefilter</li>
<li>Fixed ticket MR-730: ported from 3.5.10, fix for problem where rfc2822_max_line_length wasn’t being respected for headers added in policy</li>
<li>Feature ticket PKG-177: upgrades the bundled version of postgres to 9.0.18 </li>
<li>Feature ticket PKG-160: upgrades the bundled version of CSAPI to 10.0.2.9</li>
<li>Feature ticket MR-785: upgrades the bundled Cloudmark cartridge to version 3052.2.1.28</li>
<li>Feature ticket MR-838: certifies the domainkeys module for supercharger</li>
<li>Feature ticket MR-610: certifies the core antivirus module for supercharger</li>
<li>Feature ticket MR-808: added beta support for 'optional' mode in the tls_verify option which will allow messages to be delivered even when they fail TLS verification</li>
<li>Feature ticket MO-2818: beta support for SMTP-UTF8</li>
<li>Feature ticket MR-606: certifies Cloudmark module for supercharger</li>
<li>Feature ticket MR-809: introduces a beta version of the tls_macros module for capturing and logging information about TLS connections</li>
<li>Feature ticket MR-779: introduces beta releases of several PS modules</li>
</ul>
<h2><a name="3.6.4">Momentum 3.6.4 released on 2014-08-14</a></h2>
<ul>
<li>Fixed ticket MR-738: Fixes WebUI latency introduced in 3.6.x</li>
<li>Fixed ticket MR-702: Adds support for *FROM syntax to ECMM</li>
<li>Fixed ticket MR-698: Makes the DNS subsystem case insensitive, allowing compatibility with BIND 9.9.5</li>
<li>Fixed ticket MR-672: Verifies SPF for use with supercharger</li>
<li>Fixed ticket MR-346: Resolves some issues reported by coverity</li>
<li>Fixed ticket MR-76:  Adds support for opportunistic TLS</li>
<li>Fixed ticket MR-74:  Fixes initialization error in the leveldb driver</li>
<li>Fixed ticket MR-29:  Improves CMAF integration</li>
<li>Fixed ticket MR-33:  Config set/unset will no longer undo msys.registerControl()</li>
</ul>

<h2><a name="3.6.3">Momentum 3.6.3 released on 2014-07-01</a></h2>
<ul>
<li>Fixed ticket MR-27: FBL messages that were mmoved will no longer have ‘#mmove’ in the X-MSFBL binding</li>
<li>Fixed ticket MR-82: Refactors global throttle implementation to avoid deadlock scenario</li>
<li>Fixed ticket MR-259: Fixes memory leak discovered by jemalloc profiling</li>
<li>Fixed ticket MR-442: Includes the default policy with Momentum Sending</li>
<li>Fixed ticket MR-517: Verifies ClamAV for use with supercharger</li>
<li>Fixed ticket MR-630: Fixes segfault in the 3.x REST injector triggered by parsing errors</li>
</ul>

<h2><a name="3.6.2">Momentum 3.6.2 released on 2014-05-02</a></h2>
<ul>
<li>Fixed ticket MO-751: Fix live updates so that it doesnt overide Adaptive.lua fixes to the core product</li>
<li>Fixed ticket MO-1464: Fix SPF parser to be case insensitive</li>
<li>Fixed ticket MO-1501: Fix to allows SMPP SAR segments to be received out of order</li>
<li>Fixed ticket MO-1669: Allow locks used in the cache configurable.</li>
<li>Fixed ticket MO-1685: Fix DKIM to skip all whitespace between the ':' of the header and the first text</li>
<li>Fixed ticket MO-2007: WebUI will now only authenticate once per session so that Momentum 3.6.0 WebUI loads faster</li>
<li>Fixed ticket MO-2251: Add more detailed MSGC logging statements</li>
<li>Fixed ticket MO-2266: Add more detailed logging so trace duravip ownership issues</li>
<li>Fixed ticket MO-2219: update msgpart:text() to implement proper quoted-printable encoding as well as dot stuffing</li>
<li>Fixed ticket MO-2415: Fix race condition resulting from improper swapping behavior on large, multi-recipient messages</li>
<li>Fixed ticket MO-2470: upgrade Lua and Concurrency Kit packages to pickup fixes and optimizations.</li>
<li>Fixed ticket MO-2501: Fix to avoid Manager services being installed on MTAs</li>
<li>Fixed ticket MO-2513: Fix opendkim to scan all DKIM signatures</li>
<li>Fixed ticket MO-2548: Fix Dkim signing to not crashes ecelerity if header contains a new Line</li>
<li>Fixed ticket MO-2572: Fix dot stuffing to not remove trailing newlines when unstuffing</li>
<li>Fixed ticket MO-2578: Fix DKIM signing so that email with a newline in TO: header gets verified by dkim</li>
</ul>

<h2><a name="3.6.1">Momentum 3.6.1 released on 2014-03-06</a></h2>
<ul>
<li>Fixed ticket MO-25: Removes reference to unused 'ad_stats' subscriber to adaptive jlogs</li>
<li>Fixed ticket MO-620: Add ability to fully debug broken wildcard bounce classifications</li>
<li>Fixed ticket MO-772: Fix Message Scope to work in MOMO 3.6 – multiple event loop enabled</li>
<li>Fixed ticket MO-846: Adds ability to configure which adaptive events should trigger notification emails</li>
<li>Fixed ticket MO-848: Adds the 'bounce classifier test' command to ec_console, allowing users to quickly how a given SMTP reply is classified. Also adds detailed logging to the bounce classifer module.</li>
<li>Fixed ticket MO-994: FFix to threaded lua to prevent lua exceptions from killing ecelerity under some specific circumstances</li>
<li>Fixed ticket MO-1091: Fixes broken import in cidr_maintain script</li>
<li>Fixed ticket MO-1148: Updated UI to use uniform units of measurement</li>
<li>Fixed ticket MO-1174: Fixes error where ecconfigd would stop functioning because the control shim was maxing out the OS thread limit</li>
<li>Fixed ticket MO-1242: Added locking to ldap datasource driver to avoid deadlock discovered in OpenLDAP</li>
<li>Fixed ticket MO-1243: Fix paniclog.ec filling with lines saying “…UChar failed”</li>
<li>Fixed ticket MO-1252: Fix to prevent duravips from breaking when a local duravip is coupled to the same binding as a group duravip.</li>
<li>Fixed ticket MO-1271: Fixes error where our SMTP client code was duplicating the first chunk of a messge when the peer server did not support the 8BITMIME extension and the message contexts were spooled to disk</li>
<li>Fixed ticket MO-1276: Fixes error in ec_console help text for the 'dns_cache' command</li>
<li>Fixed ticket MO-1292: Fixes error where the SQLite datasource driver would insert duplicate records</li>
<li>Fixed ticket MO-1307: auth_radius custom port escalation</li>
<li>Fixed ticket MO-1311: Fixes the message scope module's distribution algorithm so that messages are evenly spread across the scope cluster.</li>
<li>Fixed ticket MO-1312: Makes msgpart:address_header() to return rfc2047 encoded headers in their encoded form by default</li>
<li>Fixed ticket MO-1313: Improves RFC 2047 header compliance by removing white spaces from between encoded words during header decoding</li>
<li>Fixed ticket MO-1319: Refactors the usage of non-reentrant time functions by several modules. This corrects a problem where random lines in the custom log were being output with UTC</li>
<li>Fixed ticket MO-1329: Corrects segfault caused by improper usage of a hashtable by the smpp code</li>
<li>Fixed ticket MO-1338: Fix issue where Ecelerity will not start after upgrade because of beik</li>
<li>Fixed ticket MO-1343: Refactor several modules to properly parse the port from an IPv6 address</li>
<li>Fixed ticket MO-1397: Fix bug where async httpsrv authentication resets auth closure</li>
<li>Fixed ticket MO-1469: Fix issue where ec_rotate holds onto logs</li>
<li>Fixed ticket MO-1496: Change a log statement in the vctx code from WARNING to INFO</li>
<li>Fixed ticket MO-1509: Bump SSL default expiration to 5 years</li>
<li>Fixed ticket MO-1585: Fix performance issue with Dashboard graphs</li>
<li>Fixed ticket MO-1667: Replace ck_spinlock_lock_eb with ck_spinlock_lock</li>
<li>Fixed ticket MO-1722: Cloudmark.lua error in v.3.5.7</li>
<li>Fixed ticket MO-1763: Fix crash caused by Use-after-free of buffer in smtp_cbv module</li>
<li>Fixed ticket MO-1869: Fix High Impact Issues flagged by Coverity</li>
<li>Fixed ticket MO-1904: Fix High Impact Issues flagged by Coverity 2</li>
<li>Fixed ticket MO-1906: Patched duravip and statp to ignore illegal ‘-1’ bindings.</li>
<li>Fixed ticket MO-1934: Killing foreground ecelerity process with Ctrl+C on Solaris results in SIGUSR2</li>
<li>Fixed ticket MO-2042: Fix bug that caused Stack trace when inserting data into table</li>
<li>Fixed ticket MO-2110: Fix issue where Upgrade 3.5.3 -> 3.5.8 and lost DKIM signature</li>
</ul>

<h2><a name="3.6.0">Momentum 3.6.0 released on 2013-09-30</a></h2>
<ul>
<li>Fixed ticket MO-1077 : valgrind error - invalid write. found in unit test</li>
<li>Fixed ticket MO-1076 : ecelerity coredumps when nil arguments are provided to msys.dnsLookup</li>
<li>Fixed ticket MO-595 : config reload causes unexpected restart</li>
<li>Fixed ticket MO-266 : The default memory Manager needs to be changed from umem to jemalloc</li>
<li>Feature ticket MO-28 : Multi-threaded event loop</li>
<li>Feature ticket MO-270: Make ec_rt_stats2 parse logs in parallel</li>
<li>Feature ticket MO-454: Add CPAN-Hash-Merge to the installation of Momentum</li>
<li>Feature ticket MO-674: In unit test harness, add option to exclude the tests to run</li>
<li>Feature ticket MO-702: scripts to get 3.5.3 postgre.sql db upgrade to 3.6.0</li>
<li>Feature ticket MO-1214: add hook code to allow support for dual stack</li>
<li>Feature ticket MO-1169: Upgrade Lua package to 5.1.29</li>
</ul>

<h2><a name="3.5.11">Momentum 3.5.11 released on 2014-12-15</a></h2>
<ul>
<li>Fixed ticket MR-698: Makes the DNS subsystem case insensitive, allowing compatibility with BIND 9.9.5</li>
<li>Feature ticket MO-1214: add hook code to allow support for dual stack</li>
<li>Feature ticket MR-1079: bump thrlua package to 5.1.38</li> 
</ul>

<h2><a name="3.5.10">Momentum 3.5.10 released on 2014-09-08</a></h2>
<ul>
<li>Feature ticket MR-76: Opportunistic TLS support</li>
<li>Fixed ticket MR-783: Fixes argument ordering problem in CMAF support</li>
<li>Fixed ticket MR-730: Fixes problem where rfc2822_max_line_length was not being respected for headers added in policy</li>
<li>Fixed ticket MO-2251: Add more detailed MSGC logging statements</li>
<li>Fixed ticket MO-1464: Fix SPF parser to be case insensitive</li>
<li>Fixed ticket MO-1685: Fix DKIM to skip all whitespace between the ':' of the header and the first text</li>
<li>Fixed ticket MO-2219: update msgpart:text() to implement proper quoted-printable encoding as well as dot stuffing</li>
<li>Fixed ticket MO-2415: Fix race condition resulting from improper swapping behavior on large, multi-recipient messages</li>
<li>Fixed ticket MO-2548: Fix Dkim signing to not crashes ecelerity if header contains a new Line</li>
<li>Fixed ticket MO-2572: Fix dot stuffing to not remove trailing newlines when unstuffing</li>
<li>Fixed ticket MR-259: Fixes memory leak discovered by jemalloc profiling</li>
<li>Fixed ticket MR-27: FBL messages that were mmoved will no longer have ‘#mmove’ in the X-MSFBL binding</li>
<li>Fixed ticket MR-630: Fixes segfault in the 3.x REST injector triggered by parsing errors</li>
<li>Fixed ticket MO-2007: WebUI will now only authenticate once per session so that Momentum 3.6.0 WebUI loads faster</li>
<li>Fixed ticket MR-29:  Improves CMAF integration</li>
</ul>

<h2><a name="3.5.9">Momentum 3.5.9 released on 2014-03-21</a></h2>
<ul>
<li>Fixed ticket MO-1243: Fix paniclog.ec filling with lines saying “…UChar failed”</li>
<li>Fixed ticket MO-1469: Fix issue where ec_rotate holds onto logs</li>
<li>Fixed ticket MO-1722: Cloudmark.lua error in v.3.5.7</li>
<li>Fixed ticket MO-1904: Fix High Impact Issues flagged by Coverity</li>
<li>Fixed ticket MO-1906: Patched duravip and statp to ignore illegal ‘-1’ bindings.</li>
<li>Fixed ticket MO-1934: Killing foreground ecelerity process with Ctrl+C on Solaris results in SIGUSR2</li>
<li>Fixed ticket MO-2042: Fix bug that caused Stack trace when inserting data into table</li>
<li>Fixed ticket MO-2110: Fix issue where Upgrade 3.5.3 -> 3.5.8 and lost DKIM signature</li>
<li>Fixed ticket MO-2131: Fix High Impact Issues flagged by Coverity Part 2</li>
</ul>

<h2><a name="3.5.8">Momentum 3.5.8 released on 2014-01-08</a></h2>
<ul>
<li>Fixed ticket #MO-1691: Change the default allocator from umem to jemalloc</li>
<li>Fixed ticket #MO-1763: Fix crash caused by Using a freed memory in smtp_cbv module</li>
<li>Fixed ticket #MO-1735: Fix issues with arrays and JSON in lua</li>
<li>Fixed ticket #MO-1585: Fix to config shim to stop the UI from ‘redboxing’ periodically under load</li>
<li>Fixed ticket #MO-1509: Bump SSL default expiration to 5 years</li>
<li>Fixed ticket #MO-1496: Change a log statement in the vctx code from WARNING to INFO</li>
<li>Fixed ticket #MO-1343: Refactor several modules to properly parse the port from an IPv6 address</li>
<li>Fixed ticket #MO-1329: Corrects segfault caused by improper usage of a hashtable by the smpp code</li>
<li>Fixed ticket #MO-1319: Refactors the usage of non-reentrant time functions by several modules. This corrects a problem where random lines in the custom log were being output with UTC</li>
<li>Fixed ticket #MO-1313: Improves RFC 2047 header compliance by removing white spaces from between encoded words during header decoding</li>
<li>Fixed ticket #MO-1312: Makes msgpart:address_header() to return rfc2047 encoded headers in their encoded form by default</li>
<li>Fixed ticket #MO-1252: Fix to prevent duravips from breaking when a local duravip is coupled to the same binding as a group duravip</li>
</ul>

<h2><a name="3.5.7">Momentum 3.5.7 released on 2013-10-16</a></h2>
<ul>
<li>Fixed ticket #MO-1338: Ecelerity will not start after upgrade because of beik</li>
</ul>

<h2><a name="3.5.6">Momentum 3.5.6 released on 2013-10-16</a></h2>
<ul>
<li>Fixed ticket #MO-848: Adds the 'bounce classifier test' command to ec_console, allowing users to quickly how a given SMTP reply is classified. Also adds detailed logging to the bounce classifer module</li>
<li>Fixed ticket #MO-25: Removes reference to unused 'ad_stats' subscriber to adaptive jlogs</li>
<li>Fixed ticket #MO-846: Adds ability to configure which adaptive events should trigger notification emails</li>
<li>Fixed ticket #MO-994: Fix to threaded lua to prevent certain errors from killing ecelerity</li>
<li>Fixed ticket #MO-1066: Fixes issue where running 'rebind all' could cause messages to be rebound twice</li>
<li>Fixed ticket #MO-1091: Fixes broken import in cidr_maintain script</li>
<li>Fixed ticket #MO-1148: Updated UI to use uniform units of measurement</li>
<li>Fixed ticket #MO-1174: Fixes error where ecconfigd would stop functioning because the control shim was maxing out the OS thread limit</li>
<li>Fixed ticket #MO-1242: Added locking to ldap datasource driver to avoid deadlock discovered in OpenLDAP</li>
<li>Fixed ticket #MO-1271: Fixes error where our SMTP client code was duplicating the first chunk of a messge when the peer server did not support the 8BITMIME extension and the message contexts were spooled to disk</li>
<li>Fixed ticket #MO-1276: Fixes error in ec_console help text for the 'dns_cache' command</li>
<li>Fixed ticket #MO-1292: Fixes error where the SQLite datasource driver would insert duplicate records</li>
<li>Fixed ticket #MO-1311: Fixes the message scope module's distribution algorithm so that messages are evenly spread across the scope cluster</li>
</ul>

<h2><a name="3.5.5">Momentum 3.5.5 released on 2013-08-14</a></h2>
<ul>
<li>Fixed ticket #MO-228: Fixed issue where duplicate messages could be passed to custom rejection log modules</li>
<li>Fixed ticket #MO-229: Fixed race condition in scriptlet module where Momentum could crash if a config reload happened at the same time as debug logging</li>
<li>Fixed ticket #MO-416: Fixed issue where pre_event_close hook is passed a closure that points to free'd memory</li>
<li>Fixed ticket #MO-763: Fixed unaligned memory access on SPARC when Momentum parses shared arp information from a Linux MTA</li>
<li>Fixed ticket #MO-766: Momentum no longer crashes when receiving adaptive global updates for bindings that are not locally configured</li>
<li>Fixed ticket #MO-773: /etc/init.d/ecelerity exit codes now conform to LSB init script standards</li>
<li>Fixed ticket #MO-795: Initial message destined for a remote duravip binding is now correctly mmoved</li>
<li>Fixed ticket #MO-796: Fix Momentum tp correctly ignore boundaries in the top level MIME epilogue</li>
<li>Fixed ticket #MO-797: Momentum no longer crashes when msys.core.rfc2822_prepend_headers is called with a nil value</li>
<li>Fixed ticket #MO-854: Credentials for the New User form are no longer cached in Momentum UI</li>
<li>Fixed ticket #MO-859: Allow BEIK scan be called from asynchronous validation stages</li>
<li>Fixed ticket #MO-995: Fix upgrade issue where Momentum is the only provider of SMTP service in the Server hosting the MTA.</li>
<li>Fixed ticket #MO-1051: Enhance the installation script to install from user home directories.</li>
<li>Fixed ticket #MO-1063: Upgrade to jemalloc 3.4.0</li>
</ul>

<h2><a name="3.5.4">Momentum 3.5.4 released on 2013-07-02</a></h2>
<ul>
<li>Fixed ticket #PKG-49: Upgrade to Apache 2.2.24 which addresses security vulnerability</li>
<li>Fixed ticket #PKG-49: Upgrade to Apache 2.2.24 which addresses security vulnerability</li>
<li>Fixed ticket #PKG-50: Upgrade to PHP 5.3.24 which addresses security vulnerability</li>
<li>Fixed ticket #PKG-57: Upgrade to Lua 5.1.27 which addresses memory management issues</li>
<li>Fixed ticket #MO-17: Fix to properly encoded ‘&’ character before sending to Cloudmark AF server</li>
<li>Fixed ticket #MO-226: Fix to allow loading msys.extended.ac on Solaris AMD</li>
<li>Fixed ticket #MO-227: TLS renegotiation can be disabled via configuration option: TLS_Allow_Renegotiation</li>
<li>Fixed ticket #MO-241: Clearer adaptive greylisting logging when the retry interval cannot be further adjusted</li>
<li>Fixed ticket #MO-338: Control listener connections (from ec_console domain socket connections) no longer leak when using the solaris_ports scheduler</li>
<li>Fixed ticket #MO-339: Internal validate calls will be retried twice if interrupted by a config reload.</li>
<li>Fixed ticket #MO-381: Avoid infinite loop when Passing non-base64 data to msys.base64.decode()</li>
<li>Fixed ticket #MO-465: A 421 bounce and connection close will no longer temp fail the next message in the queue</li>
<li>Fixed ticket #MO-520: Momentum can now optionally dot stuff rest injected messages. Dot_stuff = “true” in the restinjector config scope. Defaults to false.</li>
<li>Fixed ticket #MO-521: Support for Cloudmark ActiveFilter included in Momentum</li>
<li>Fixed ticket #MO-550: Rest injected messages now automatically have can_relay context thereby allowing them to be dkim signed when sign condition can_relay is present</li>
<li>Fixed ticket #MO-631: Fix to avoid crash when showqueue command has trailing white space characters</li>
<li>Fixed ticket #MO-632: Fix default_policy.lua keyword filter initialization race condition</li>
<li>Fixed ticket #MO-682: Fix to make “/etc/init.d/ecelerity restart” wait for ecelerity to properly shutdown before attempting the start</li>
<li>Fixed ticket #MO-712: More verbose error messages when config reload fails</li>
<li>Fixed ticket #MO-748: msys.smpp.smpp_read_msg_text_blob now returns nil when the key does not exist (previously returned empty string)</li>
</ul>

<h2><a name="3.5.3">Momentum 3.5.3 released on 2013-05-13</a></h2>
<ul>
<li>Fixed ticket #PKG-30: Upgraded PosgreSQL to version 9.0.13 which addresses security vulnerabililty</li>
<li>Fixed ticket #PKG-46: Upgraded Lua to version 5.1.12 which addresses garbage collector race conditions</li>
<li>Fixed ticket #MC-90: Uninstall now correctly removes the msys-cpan-compat-XML-SAX-Expat package</li>
<li>Fixed ticket #MO-19: Fixed case where momentum was consuming most available memory</li>
<li>Fixed ticket #MO-22: Fixed memory leak in scripting engine</li>
<li>Fixed ticket #MO-62: Arguments to ctype functions now correctly being cast to unsigned char</li>
<li>Fixed ticket #MO-92: Fixed crash due to uninitialized string in adaptive module</li>
<li>Fixed ticket #MO-171: Removed development repo location from ec_console version output</li>
<li>Fixed ticket #MO-182: Fixed crash caused by reference counting bug in configuration module</li>
<li>Fixed ticket #MO-220: Fixed crash due to a scriptlet removing all recipients from a message</li>
<li>Fixed ticket #MO-222: Fixed crash due to a scriptlet removing all recipients from a message</li>
<li>Fixed ticket #MO-225: Fixed crash due to null pointer in esmtp module</li>
<li>Fixed ticket #MO-279: Fixed a crash in the XMPP module when all recipients are removed from the message</li>
<li>Fixed ticket #MO-283: SMPP DR_pdu_eval hook now allows the setting of the response's PDU command status</li>
<li>Fixed ticket #MO-284: Fixed a case where the cluster manager install fails when the hostname has upper case characters</li>
<li>Fixed ticket #MO-285: Fixed a parsing bug with nested multipart messages</li>
</ul>

<h2><a name="3.5.2">Momentum 3.5.2 released on 2013-03-26</a></h2>
<ul>
<li>Fixed ticket #PKG-15: Upgraded to Expurgate SDK 4.0, so that Expurgate runs on Redhat6</li>
<li>Fixed ticket #PKG-16: Upgrade to PostgreSQL 9.0.12 to fix serious index corruption issue</li>
<li>Fixed ticket #MO-16: Momentum crashes when lots of SMPP connections are open</li>
<li>Fixed ticket #MO-20: Expurgate Anti virus Not working</li>
<li>Fixed ticket #MO-21: Minor enhancements to Adaptive Delivery Performance</li>
<li>Fixed ticket #MO-30: DKIM sub-domain validation doesn't work when i= is missing</li>
<li>Fixed ticket #MO-34: Cleanup Adaptive Delivery Daily Report</li>
<li>Fixed ticket #MO-37: msgpart:text() function can get stuck in infinite loop in Base64 decoding in Solaris</li>
<li>Fixed ticket #MO-41: In Adaptive module, binding domain lock is locked as read lock even while doing write operation</li>
<li>Fixed ticket #MO-43: Improved Performance when using Message Scope.</li>
<li>Fixed ticket #MO-46: Added functionality to generate core dump on catastrophic failures</li>
</ul>

<h2><a name="3.5.1">Momentum 3.5.1 released on 2013-01-15</a></h2>
<ul>
<li>Fixed ticket #BZ4426: Improvements to msys.av.scan - full AV status and engine results are now available</li>
<li>Fixed ticket #BZ5780: Improved startup performance when AD is enabled</li>
<li>Fixed ticket #BZ6077: Fix for header folding in Lua</li>
<li>Fixed ticket #BZ6081: Corrected issue of campaign module doing blocking database queries in eventloop.</li>
<li>Fixed ticket #BZ6183: Corrected issue of cluster manager process ,eccmgr, getting terminated on issuing a 'config reload' command in ec_console.</li>
<li>Fixed ticket #BZ6207: Fixed an issue where a negative value for the header folding length in Lua would cause Ecelerity to lock up.</li>
<li>Fixed ticket #BZ6264: Added a variety of decomposer engines to CSAPI config</li>
<li>Fixed ticket #BZ6270: CSAPI package is updated to latest CSAPI 9.1.3.30 version.</li>
<li>Fixed ticket #BZ6278: Entire message, not just first 128KB, now sent to CSAPI scanner</li>
<li>Fixed ticket #BZ6342: Added support for CSAPI MaxCumulativeExtractSize option</li>
<li>Fixed ticket #BZ6343: Corrected case where SSL (not TLS) connection could hang forever</li>
<li>Fixed ticket #BZ6359: Added support for backstore_job_concurrency and backstore_job_concurrency options for adaptive module so that users can set limit and specify threadpool for adaptive IO jobs.</li>
<li>Fixed ticket #BZ6410: Corrected race condition where running console commands too soon after startup could, in some cases, cause a crash</li>
<li>Fixed ticket #BZ6412: Memory leak on every MO injection</li>
<li>Fixed ticket #BZ6427: Unscannable verdict is now correctly returned.</li>
<li>Fixed ticket #BZ6433: Updated settings in BEIK configuration file bmiconfig.xml so that it wont log lots of debug info.</li>
<li>Fixed ticket #BZ6452: A message which contains both an attachment with a virus, and another attachment which is unscannable, was reported as 'unscannable', rather than as 'infected'. This is corrected here.</li>
<li>Fixed ticket #BZ6453: In some cases EINTR (interrupted syscall) signal may not be handled correctly in jlog. This is corrected.</li>
<li>Fixed ticket #BZ6454: Fixed a reject log message where an unscannable message was indicated as quarantined. Corrected this such that the log now indicates an unscannable message was detected.</li>
<li>Fixed ticket #BZ6462: Non-functional Return Path tab removed from UI.</li>
<li>Fixed ticket #BZ6465: Classify CSAPI non-viral threats, such as spy-ware, as "infected" messages.</li>
<li>Fixed ticket #BZ6467: Corrected case where messages passed to CSAPI were wrongly dot-stuffed</li>
</ul>

<h2><a name="#3.3.3">Momentum 3.3.3 released on 2012-10-16</a></h2>
<ul>
<li>Fixed ticket #BZ5541: Transcoding failure can cause blank SMS messages</li>
<li>Fixed ticket #BZ5576: Fixed encoding problems caused by Lua script using
msg:text_replace for quoted-printable encoded messages.</li>
<li>Fixed ticket #BZ5881: Inefficient segmentation of SMS messages</li>
<li>Fixed ticket #BZ6044: Fixed degradation in performance seen in Adaptive module in
cases where larger number of binding groups are used.</li>
<li>Fixed ticket #BZ5510: Fixed memory leaks in core_final_validation(), msys.validate.dkim.get_domains() and msys.validate.dkim.get_responsible_domain() are used in Lua scripts. Also added support for Lua access to DKIM validation results.</li>
<li>Fixed ticket #BZ4964: TLS_Verify = "no" does not fully disable certificate verification</li>
<li>Fixed ticket #BZ5144: 3.3.2 webconsole showing wrong software version</li>
<li>Fixed ticket #BZ5535: memory leak in brightmail module after config reload</li>
<li>Fixed ticket #BZ6244: SWAKS removed from packaging. See
www.jetmore.org/john/code/swaks/</li>
</ul>

<h2><a name="3.4.2-patch1">Momentum 3.4.2-patch1 released on 2012-07-05</a></h2>
<ul>
<li>Fixed ticket #BZ5571: Improve performance of large binding groups</li>
<li>Fixed ticket #BZ5728: On occasion, messages could be delivered twice over a Momentum restart. This fix provides a workaround.</li>
<li>Fixed ticket #BZ5420: Fix for logfile names getting corrupted</li>
</ul>

<h2><a name="3.5.0">Momentum 3.5.0 released on 2012-06-26</a></h2>
<ul>
<li>Fixed ticket #BZ5215: Momentum 3.4 on Solaris/SPARC was crashing due to a memory misalignment problem in MSGC. The problem cause was identified and corrected. This problem did not affect any other supported platform.</li>
<li>Fixed ticket #BZ5351: Symantec "conduit" process did not start correctly on Solaris after install</li>
<li>Fixed ticket #BZ5353: Bad IP address presented to Brightmail</li>
<li>Fixed ticket #BZ5026: License validation fixes</li>
<li>Fixed ticket #BZ5186: Memory leak in msys.validate.dkim.get_domains</li>
<li>Fixed ticket #BZ5189: Message rejected with "message body missing" error</li>
<li>Fixed ticket #BZ5487: Memory leak in msys.validate.dkim.get_responsible_domains</li>
<li>Fixed ticket #BZ5618: filenames of centralised logfiles can be corrupt</li>
<li>Fixed ticket #BZ5686: Memory leak in core_final_validation</li>
<li>Fixed ticket #BZ4426: Improvements to msys.av.scan - full AV engine results are now available</li>
<li>Fixed ticket #BZ5529: Unable to save newly created policy in the WebUI</li>
<li>Fixed ticket #BZ5538: set of available bindings is not shown when editing the filters</li>
<li>Fixed ticket #BZ5599: Symantec CSAPI integration leaves files in /var/tmp</li>
<li>Fixed ticket #BZ5723: Null pointer fix in msys.dnsLookup</li>
<li>Feature ticket #BZ4777: msys.av.scan status must accurately reflect CSAPI results</li>
<li>Feature ticket #BZ5341: PostgreSQL upgraded to 9.0.7</li>
<li>Feature ticket #BZ5352: Default Brightmail ruleset is rules2full (was rules2litea)</li>
<li>Feature ticket #BZ5825: XMPP - Enable PLAIN Authentication with TLS</li>
<li>Feature ticket #BZ5827: Lua now has full access to DKIM results</li>
<li>Feature ticket #BZ5828: SMTP ENHANCEDSTATUSCODES now available everywhere</li>
<li>Feature ticket #BZ5830: More Descriptive protocol deviation error</li>
<li>Feature ticket #BZ5831: Momentum now supports priority messages.</li>
<li>Fixed ticket #BZ3522: Thread local storage issues in Lua</li>
<li>Fixed ticket #BZ5074: AD Reports could be empty</li>
<li>Fixed ticket #BZ5104: Suspension of bindings can cause messages to bounce between nodes</li>
<li>Fixed ticket #BZ5157: Thread local storage issues in Lua</li>
<li>Fixed ticket #BZ5253: crash in maildir module</li>
<li>Fixed ticket #BZ5439: Brightmail tracker header now broken correctly over multiple lines</li>
<li>Fixed ticket #BZ5533: duravip_follow a binding causes stacktraces</li>
<li>Fixed ticket #BZ5545: null pointer crash in SMPP</li>
<li>Fixed ticket #BZ5550: brightmail module leaks memory on "config reload"</li>
<li>Fixed ticket #BZ5582: new custom logger macros</li>
<li>Fixed ticket #BZ5632: msgpart:text(), msgpart:text_replace(), msg:text() and msg:text_replace() can produce bad Quoted-Printable encodings.</li>
<li>Fixed ticket #BZ5675: Calling msys.validate.dkim.get_verify_results with an unsigned message fails.</li>
<li>Fixed ticket #BZ5695: SMTP ENHANCEDSTATUSCODES missing</li>
<li>Fixed ticket #BZ5713: Symantec CSAPI now functional on SPARC</li>
<li>Fixed ticket #BZ5853: SMPP messages going out with no content</li>
<li>Fixed ticket #BZ3123: smtp_auth_user and status are only set if a core::validate_auth_hook is registered</li>
<li>Fixed ticket #BZ4429: MIME parser fix</li>
<li>Fixed ticket #BZ4842: Solaris crashes now include backtrace</li>
<li>Fixed ticket #BZ4859: Setting the filter to remove an individual node from a cluster causes no change on the dashboard</li>
<li>Fixed ticket #BZ4964: TLS_Verify = "no" does not fully disable certificate verification</li>
<li>Fixed ticket #BZ5167: Add indices to SQLite pg_cache database for better performance</li>
<li>Fixed ticket #BZ5180: Fixed sorting on Adaptive Adjustments report</li>
<li>Fixed ticket #BZ5219: Backslash in transfail response is not handled by ec_rt_stats2</li>
<li>Fixed ticket #BZ5248: Messages failed on first delivery attempt showed incorrect retry count</li>
<li>Fixed ticket #BZ5282: issue with riak stop/start</li>
<li>Fixed ticket #BZ5305: issue with riak stop/start during upgrade on Sparc only</li>
<li>Fixed ticket #BZ5364: race condition in thread pool configuration code</li>
<li>Fixed ticket #BZ5692: Small memory leak in REST injector</li>
<li>Fixed ticket #BZ5138: crash when msg:context_set() called incorrectly</li>
<li>Fixed ticket #BZ5633: msgpart:text(new_text) fails if new_text does not contain an ending LF</li>
<li>Fixed ticket #BZ3433: clustered log files never properly deleted</li>
<li>Fixed ticket #BZ4132: UI tabs are not displayed correctly on the Domains page</li>
<li>Fixed ticket #BZ4396: httpsrv crashes on Solaris with debug_level == DEBUG</li>
<li>Fixed ticket #BZ4844: msgpart:text() can remove all blank lines</li>
<li>Fixed ticket #BZ5097: Memory counters go to invalid values</li>
<li>Fixed ticket #BZ5146: rt_stats_cache_db option in ec_rotate.conf is ignored</li>
<li>Fixed ticket #BZ5772: Entering bad node name in installer causes error exit</li>
<li>Fixed ticket #BZ1527: SMTP Extensions AUTH verbs no longer case-sensitive</li>
<li>Fixed ticket #BZ4173: Custom Reporting dropdown report selection</li>
<li>Fixed ticket #BZ5603: Messages failed on first delivery attempt showed incorrect retry count</li>
</ul>

<h2><a name="3.4.2">Momentum 3.4.2 released on 2012-04-02</a></h2>
<ul>
<li>Fixed ticket #BZ5100: Root Cause: When config reload occurs, active Lua threads were moved to be reused but the thread state was not always completely cleaned up.  Resolution: Make sure Lua thread state is always completely cleaned up when the Lua thread is placed onto the "ok-to-reuse" queue.</li>
<li>Fixed ticket #BZ5205: Root Cause: When adding an IP address to an audit series, one type of audit series was not being handled.  Resolution: Added the case to handle the previously un-handled audit series type when adding an IP address to an audit series.  Reviewed the audit series code looking for other instances where an audit series type was not handled, discovered one other instance, and corrected that instance also.</li>
<li>Fixed ticket #BZ5327: Root Cause: When a large number of rules was returned from the BrightMail scan of a message, the formatting of the rule numbers into a string failed.  Resolution: Modified the method used when formatting the rule numbers into a string to accommodate an unlimited number of rules.</li>
</ul>

<h2><a name="3.4.1">Momentum 3.4.1 released on 2012-03-07</a></h2>
<ul>
<li>Fixed ticket #BZ5215: Momentum 3.4 on Solaris/SPARC was crashing due to a memory misalignment problem in MSGC.  The problem cause was identified and corrected.  This problem did not affect any other supported platform.</li>
<li>Feature ticket #BZ5116: Enhanced the functionality of the Symantec Beik module to include all of the same functions that are available in the Brightmail client/server implementation. These additional functions include: is_default, and tracker.</li>
<li>Fixed ticket #BZ5281: Changed installer to prevent uncommon race condition during upgrades where installer would appear to hang while trying to install the new packages.</li>
<li>Fixed ticket #BZ5086: The webui no longer attempts to restart the local ecelerity instance, which could cause a race with the automatic updates.  Now the singlenode case will act like the cluster case and the ecelerity instance will get updated by the cron job within a minute of any commit through the webui.</li>
</ul>

<h2><a name="3.4.0">Momentum 3.4.0 released on 2012-02-06</a></h2>
<ul>
<li>Fixed ticket #BZ4440: brightmail_scanner Sieve action now works in the each_rcpt phase</li>
<li>Fixed ticket #BZ4476: Fixed an issue so that the max_size option in the brightmail module now works correctly in Solaris SPARC.</li>
<li>Fixed ticket #BZ4533: Support for querying against mBlox enhanced services API to determine which Network Operator is servicing a given mobile number.</li>
<li>Fixed ticket #BZ4995: Momentum is now available in Red Hat 64bit packaging.</li>
<li>Fixed ticket #BZ3400: Resolved an issue where Adaptive adjustments were not included in the Adaptive Summary reports.</li>
<li>Fixed ticket #BZ3859: Improvements made to reduce load on scheduler thread when calling select AVAS modules from Lua.</li>
<li>Fixed ticket #BZ4289: From configurations doing per-message TLS, resolved an issue where in certain circumstances messages could get stuck on TLS downgrade.</li>
<li>Fixed ticket #BZ4425: msys.readfile() Lua function can now be used outside of the scheduler thread.</li>
<li>Fixed ticket #BZ4633: Fix for intermittent valgrind error that is seen sometimes, which indicates use-after-free situation when msys.timer is used in lua scripts.</li>
<li>Fixed ticket #BZ4634: Fixed an issue where msys.readfile() wouldn't work in non-scheduler threads</li>
<li>Fixed ticket #BZ4636: Fixed an issue where the Cloudmark module initializes its library when running in the shim, which now longer happens.</li>
<li>Fixed ticket #BZ4685: Resolved an issue where a crash could occur when a binding that is tracked by Adaptive Delivery is removed from the configuration.</li>
<li>Fixed ticket #BZ3260: Resolved an issue where ecconfigd authentication failed if the Brightmail module was not installed on the cluster manager. During installation, additional questions are now asked on the manager as well as the mta</li>
<li>Fixed ticket #BZ3311: A binding beginning with the word "all" used to affect the results of the "showqueue binding" console command, by returning all the results from the domain, instead of only the results with the domain and binding referenced.</li>
<li>Fixed ticket #BZ3875: The custom_logger protocol (%p) value now correctly reflects the string "rest" vs "unknown" when the REST protocol is used.</li>
<li>Fixed ticket #BZ3989: Resolved an issue where under certain circumstances the Cluster Manager would incorrectly show as offline on the Status tab of the web console.</li>
<li>Feature ticket #BZ3113: The installer will prevent and warn a user from upgrading if the the version of Momentum that is currently installed is not compatible with the version of Momentum they are trying to upgrade to.</li>
<li>Feature ticket #BZ3450: During an upgrade, install, or reinstall the Local httpd cache will now be cleared to prevent potential webui issues if a corruption with the cache were to occur.</li>
<li>Feature ticket #BZ3974: Installer enhancement that checks for presence of required packages for Solaris installs.</li>
<li>Feature ticket #BZ4532: Customer may now define their own MCMT types.</li>
<li>Feature ticket #BZ4692: Updated bounce classification rules.</li>
<li>Feature ticket #BZ4711: ac:inbound_session_count now supports IPv6.</li>
<li>Feature ticket #BZ5163: Support for querying against mBlox enhanced services API to determine which Network Operator is servicing a given mobile number.</li>
<li>Feature ticket #BZ5164: Logging support for XMPP (Beta). XMPP license required.</li>
<li>Feature ticket #BZ5165: XMPP Roster and Presence support. (Beta) XMPP license required.</li>
<li>Feature ticket #BZ5166: The Message Bus (MBUS) has been replaced with Message System Group Communication (MSGC) to improve resiliency during networking issues between nodes in a cluster. SEE RELEASE NOTES FOR IMPORTANT INFORMATION ON UPGRADING.</li>
<li>Fixed ticket #BZ4186: Added configuration options to support receiving delivery responses as either Hexadecimal or Decimal format.</li>
<li>Fixed ticket #BZ4803: Added the ability to export Adaptive Delivery reports as CSV from the UI.</li>
<li>Fixed ticket #BZ4853: Data in Adaptive Delivery reports in the UI is now sortable</li>
<li>Fixed ticket #BZ4353: Adaptive Delivery not longer takes action on the #mmove binding</li>
<li>Fixed ticket #BZ4416: Resolved an issue where default policies where only installed on the MTA role.</li>
<li>Fixed ticket #BZ4880: Resolved an issue where the cluster health was incorrectly showing red when a node is removed.</li>
<li>Fixed ticket #BZ5059: Resolved an issue where Momentum would crash if a lua script had  ' require("msys.extended.vctx")'  and no'require("msys.extender");' in it.</li>
<li>Fixed ticket #BZ5127: Resolved an issue where the Paths tab was incorrectly showing for Momentum for Sending.  This tab should only appear on Momentum for Receiving.</li>
<li>Feature ticket #BZ4525: Updated Adaptive Deliver rules for AOL and Hotmail,</li>
<li>Fixed ticket #BZ4800: Added the ability to sort on columns in the Adaptive Delivery reports in the Web Console.</li>
<li>Fixed ticket #BZ1413: Upgraded Commtouch to version 4.02.</li>
<li>Fixed ticket #BZ4752: Resolved minor issue in appearance of selected check boxes in filters for multi-node and multi-cluster configurations.</li>
<li>Fixed ticket #BZ4754: Configuration version now shows correctly on the status page.</li>
<li>Fixed ticket #BZ5035: Resolved an issue where the Reporting user could see node controls on the status page in the Web Console.</li>
</ul>

<h2><a name="3.3.2">Momentum 3.3.2 released on 2011-11-01</a></h2>
<ul>
<li>Fixed ticket #BZ4517: Resolved an issue where in limited circumstances, after an upgrade to 3.3.1, it is possible for ec_rt_stats2 to get "stuck" and be unable to insert records into the database.</li>
<li>Fixed ticket #BZ4573: Corrected a race condition in the Datasource and PCRE caches which could be triggered with very high cache insert/replace activity.</li>
</ul>

<h2><a name="3.3.1">Momentum 3.3.1 released on 2011-10-10</a></h2>
<ul>
<li>Feature ticket #BZ3922: AD is now cluster aware.  See release notes and documentation for important configuration information.</li>
<li>Feature ticket #BZ2841: A new hook, core_pre_esmtp_auth, has been added that will provide connection/vctx information during the auth phase.</li>
<li>Feature ticket #BZ3931: Momentum installer no longer replaces any version of the Cloudmark cartridge manually installed by the customer i.e. not installed by the Momentum installer.</li>
<li>Fixed ticket #BZ4439: WARNING: if upgrading from 3.3.0, the entire data migration must be complete before upgrading to Momo 3.3.1. See release notes for details.</li>
<li>Fixed ticket #BZ1502: Fixed an issue where the shim could incorrectly report an issue with ecelerity.conf when there is a hook, like core_final_validation, in sieve.</li>
<li>Fixed ticket #BZ3097: Resolved an issue that under certain circumstances could display an incorrect value for total messages on the rejections report in the Web Console.</li>
<li>Fixed ticket #BZ4398: msc_server service is no longer enabled if messagescope is not activated.</li>
</ul>

<h2><a name="3.3.0">Momentum 3.3.0 released on 2011-09-26</a></h2>
<ul>
<li>Feature ticket BZ3923: PLEASE READ RELEASE NOTES AND BACKUP DATABASE BEFORE UPGRADING: Updated the PostgresSQL database from version 8 to version 9 and updated the database schema to normalize data. The upgrade process will migrate data to the new schema which could take many hours depending on the size of your database. Your system will be able to send and receive email while database migration occurs, however, data in the Web UI will not be accurate until the migration is complete.</li>
<li>Feature ticket BZ4370: NOTE: The migration process will require additional free disk space of approximately the same amount of space currently in use by /var/db/msyspg. The installer will check for adequate disk space before starting the migration.</li>
<li>Feature ticket BZ2631: Added a new esmtp listener option, starttls_injection_policy, to resolve a recently identified industry-wide security issue for SMTP implementations whereby commands could be injected before the SSL negotiation completed (CVE-2011-0411). The default value, "reject", will disconnect SMTP sessions if commands are sent after the STARTTLS command but before SSL negotiations are completed.</li>
<li>Feature ticket BZ3279: "ec_dkim_verify_results" now include the "query" (q=) and "algorithm" (a=) values</li>
<li>Feature ticket BZ3949: Replaced third party component used in bounce classification with improved Momentum Bounce Classifier.</li>
<li>Feature ticket BZ1892: Installer script improved to install system dependencies during upgrade that could have blocked uninstalling old packages.</li>
<li>Feature ticket BZ2656: Added help for the ec_console command "adaptive rules" to the "adaptive help" command output.</li>
<li>Feature ticket BZ3876: A new section has been added to the Web UI to display and run custom reports that are generated from customizable report templates. The creation of customizable report templates is currently limited to Message System's Professional Services. See documentation for additional details.</li>
<li>Feature ticket BZ3928: Adaptive Delivery reports have now been added under the report tab in the Web UI. (Phase 1) Also, selection of reports have been changed to drop down selector vs. righthand navigation elements for easier report selection. See release notes and documentation current limitations and additional information.</li>
<li>Feature ticket BZ3932: The ability to store mobile messages has been added and policy support to take action on the stored message upon asynchronous arrival of delivery receipts. See documentation for additional information. (Mobile Momentum)</li>
<li>Feature ticket BZ3929: Role based access to reports.</li>
<li>Fixed ticket BZ3741: Resolved an issue where, under certain circumstances, messages are incorrectly moved from node to node in a clustered environment when all IPs for a particular domain are suspended by Adaptive Delivery. This also resolves the performance degradation and watch dogging some customers may have experienced that resulted from the unnecessary movement of messages between nodes.</li>
<li>Fixed ticket BZ4061: Resolved an issue where a crash can occur in certain circumstances due to parallel accesses to the inbound_audit named series.</li>
<li>Fixed ticket BZ4065: Resolved an issue with Adaptive Delivery where FBL and Bounce stats where collected for all domains, not just those for which AD was enabled.</li>
<li>Fixed ticket BZ3050: Resolved an issue where a message exceeding the 'large_message_threshold' value was not forced to disk when force_fsync is configured.</li>
<li>Fixed ticket BZ3406: Fixed an issue where temp directories are not removed when local configuration changes are not committed or not committed successfully.</li>
<li>Fixed ticket BZ3849: Fixed a bug in scheduler that it would sometimes clear an event it did not own which caused a missing timed event.</li>
<li>Fixed ticket BZ3870: Resolved an issue where ec_rt_stats2 could crash when attempting to write or copy an invalid stat entry to the database. The resulting crash could cause log files to back up on the nodes.</li>
<li>Fixed ticket BZ4043: A post installation procedure is required to configure and run Symantec CSAPI on a Solaris deployment. See Momentum 3.3 release notes.</li>
<li>Fixed ticket BZ4094: To reduce the amount of data replicated by Spread, replication for infrequently used items has been removed from the standard configuration.  These are outbound_cidr, outbound_domains, and outbound_binding_domains replication. Refer to "Data Replication" the documentation to change this behavior.</li>
<li>Fixed ticket BZ4179: Resolved an issue which prevented users (admin, users) from having access to the Administration tab when Momentum is configured to use LDAP for Web Console authentication.</li>
<li>Fixed ticket BZ4226: Resolved an issue where under certain circumstances the 'warmup' adaptive actions are setting the binding age incorrectly,</li>
<li>Fixed ticket BZ2146: Fix a bug in Sieve so that email address matches can be made using localpart or domain.</li>
<li>Fixed ticket BZ2908: Some of the perl scripts may die or otherwise exit without triggering the "abnormal termination" detection in gimli. An option is added to the monitor process to force a respawn even in this situation.</li>
<li>Fixed ticket BZ3041: "binding active" console command will no longer concatenate multiple domain names in its output.</li>
<li>Fixed ticket BZ3195: Resolved an issue that could cause a crash when the %S macro is incorrectly included in the "log_delivery_format" in the smpp_logger Module Configuration file.</li>
<li>Fixed ticket BZ3561: Resolved an issue that could occur when ec_qp_encode_to_string() function was passed a null value for toencode</li>
<li>Fixed ticket BZ3604: Resolved an issue where the start/stop server controls on the Status Tab in the UI would not work for customers that using a FQDN in cluster.boot and mbus.conf.</li>
<li>Fixed ticket BZ3609: Enhanced the Lua API to capture connection error to a BrightMail server.</li>
<li>Fixed ticket BZ3610: Enhanced the Lua API to capture all errors returned from BrightMail server.</li>
<li>Fixed ticket BZ3844: Fixed an issue in dk, dkim and select third party modules that could cause a crash when more than one of them are configured to run together</li>
<li>Fixed ticket BZ3903: Improved validate_config script to support node_name override in cluster.boot file (for FQDN hostnames).</li>
<li>Fixed ticket BZ3946: Resolved an issue that could cause a memory leak when the disk for log files is full</li>
<li>Fixed ticket BZ4006: Fixed an issue that could cause a crash under limited circumstances when changing the pathway during the validate_connect</li>
<li>Fixed ticket BZ4080: ec_rt_stats2 now defaults to  "-W --watchlist_only" to help slow database growth by only storing and rolling up stats for domains on the watchlist.  For new installations, the watch list is pre-populated with common domains. See ec_rt_stats2 in the documentation to change this behavior.</li>
<li>Fixed ticket BZ4262: Added Adaptive stanza options for Enable_Bounce_Stats and Enable_FBL_Stats to allow customers to disable performance intensive calculations if not using AD bounce or FBL threshold rules.</li>
<li>Fixed ticket BZ2522: SMPP connections now show up using the ec_console "show outbound" command. However due to a current limitation in the debug framework, all SMPP connections will show up in ec_console "show outbound" command, whether the connection is for inbound/receiving or outbound/transmission. SMPP connections do not show when using the "show inbound" command.</li>
<li>Fixed ticket BZ3189: Filter cache is no longer loaded on Web Console login, resolving a display issue for some customers with a very large number of bindings.</li>
<li>Fixed ticket BZ3934: Riak has been added to Momentum for use with the following new features: AD Cluster Aware, Custom Reports, and	retain mobile messages for retry upon async failure.  See release notes and documentation for important configuration information.</li>
<li>Fixed ticket BZ4141: Removed spurious "svn permission denied" warning that could occur in webui error log under some circumstances</li>
<li>Fixed ticket BZ1780: Fix a bug so that the value of "peak objects" shown in the output of the console command "memory" is correct.</li>
<li>Fixed ticket BZ3931: Cloudmark cartridge does not get replaced if installed by manually by customer.</li>
</ul>

<h2><a name="3.2.5">Momentum 3.2.5 released on 2011-12-19</a></h2>
<ul>
<li>Fixed ticket BZ4867: Replaced third party component used in bounce classification with improved Momentum Bounce Classifier.</li>
</ul>

<h2><a name="3.2.3">Momentum 3.2.3 released on 2011-08-10</a></h2>
<ul>
<li>Fixed ticket BZ3761: You can now use a persistent SMPP connection on a DuraVIP Binding.</li>
<li>Fixed ticket BZ3690: Resolved an issue where data would not display on the domain detail page in the UI under certain circumstansous for systems with a very large number of bindings.</li>
<li>Fixed ticket BZ3706: Removed 'require ( "strict" )' from the Adaptive module to avoid possible conflict for other Lua modules that are not written to work with strict.</li>
<li>Fixed ticket BZ3728: Installer now properly sets execute permission on validate_config resolving an erroneous "Your config is not valid" error that could occur when upgrading to Momentum 3.2.2.</li>
<li>Fixed ticket BZ3651: Resolved an issue where under limited circumstances a crash may occur under load on Sparc.</li>
<li>Fixed ticket BZ3693: Mobile latency report now correctly displays in the Reporting Tab of the UI.</li>
<li>Fixed ticket BZ3759: Resolved a database installation error that can occur when the Language in force at time of install is not UTF8.</li>
</ul>

<h2><a name="3.2.2">Momentum 3.2.2 released on 2011-07-20</a></h2>
<ul>
<li>Fixed ticket BZ3679: Corrected the message detail pane on the Domains / Active Queue report to display the binding name when reviewing the details of a selected message.</li>
<li>Fixed ticket BZ3681: Fixed an issue where occasionally the message detail would not display on the Domains page in the UI for a selected message in the active queue.</li>
<li>Fixed ticket BZ3684: When SSL is enabled for the webconsole, the installer now uses the primary IP address for the host (instead of _default_). This provides a work around for a known Solaris bug related to configuring an https virtualhost.</li>
<li>Fixed ticket BZ3574: Resolved an issue where attempting to bootstrap the config checkout on a cluster manager could fail with an authentication error.</li>
<li>Fixed ticket BZ3575: Fixed an issue where in some situations an error occurred when attempting to commit config changes after upgrading to version 3.2.</li>
<li>Fixed ticket BZ3632: Resolved an issue introduced in 3.2.0 where under certain circumstances messages get stuck in the #mmove binding.</li>
<li>Fixed ticket BZ3418: Updated msc_server script for Message Scope implementations using Momentum 3.2.</li>
<li>Fixed ticket BZ3346: Fixed an issue preventing transient failure details from displaying in the Transient failure report in the Web UI in Momentum 3.1 and 3.2.</li>
<li>Fixed ticket BZ3426: Expanded LDAP Datasource functionality to support LDAPS and LDAP+STARTTLS for more flexible connection to LDAP and Active Directory data sources.</li>
<li>Fixed ticket BZ3647: ds_ldap is now installed on the Cluster Manager which resolves an issue for installations that use LDAP for Web UI authentication.</li>
<li>Fixed ticket BZ3691: Resolved an issue where Momentum would not start if persistent connections were enabled in the Mobility module and Adaptive Delivery was also enabled.</li>
<li>Fixed ticket BZ3217: Added cache for ecconfigd authorization to improve performance when committing or retrieving files from the configuration repository.</li>
<li>Fixed ticket BZ3315: Resolved an issue where audit series were not being replicated to the cluster.</li>
<li>Fixed ticket BZ3478: Resolved an error loading the bounce_logger module when datasource module was not explicitly loaded when running Momentum 3.1 or 3.2. The datasource module is now loaded implicitly by the bounce_logger module.</li>
<li>Fixed ticket BZ3515: Systems using LDAP/Active Directory authentication and that have large numbers of configuration files and non-local drives may have experienced a problem where ecconfigd would eventually refuse to process SVN requests on the manager node.</li>
</ul>

<h2><a name="3.2.1-patch1">Momentum 3.2.1-patch1 released on 2011-06-13</a></h2>
<ul>
<li>Updated msc_server script for Message Scope implementations using Momentum 3.2.</li>
</ul>

<h2><a name="3.2.1">Momentum 3.2.1 released on 2011-06-01</a></h2>
<ul>
<li>Fixed ticket BZ3210: Add support for using node-local include files with node name containing periods (e.g. FQDN).</li>
<li>Fixed ticket BZ3209: The installer script now validates config files before starting upgrade to prevent issues due to enhanced authentication methods (config must be valid on manager as well as MTA's).</li>
<li>Fixed ticket BZ3208: Same as BZ3209.</li>
<li>Fixed ticket BZ3211: A Lua hook defined with an unknown type may cause Momentum to fail.</li>
</ul>

<h2><a name="3.2.0">Momentum 3.2.0 released on 2011-05-16</a></h2>
<ul>
<li>Feature ticket #BZ1787: Symantec BEIK upgraded to version 620.</li>
<li>Feature ticket #BZ2556: HTTP Proxy now supported for Momentum Live Update services.</li>
<li>Feature ticket #BZ2555: Adaptive Delivery now provides automated rules in response to high Feedback Loop complaints and takes action when a Feedback Loop Compliant Rate crosses a configurable threshold.</li>
<li>Feature ticket #BZ2403: Adaptive Delivery now has the ability to take AD actions based a bounce and/or FBL rate threshold.</li>
<li>Feature ticket #BZ2402: Symantec CSAPI upgraded to 9.1.0.13 everywhere except Solaris AMD64 (not available).</li>
<li>Feature ticket #BZ2401: Adaptive Delivery now allows Administrators to create their own custom AD rules.</li>
<li>Feature ticket #BZ2320: Adaptive Delivery rules are now automatically updated via the Live Update service.  Momentum clients no longer need to wait for a maintenance release to receive updated AD rules.</li>
<li>Feature ticket #BZ2319: Momentum customers now have the ability to build a freestanding Lua module written in C using the version of Lua included with Momentum as part of the Momentum developer packages.</li>
<li>Feature ticket #BZ2318: Momentum now provides the ability to send outbound messages via ecstream.</li>
<li>Feature ticket #BZ2316: More supported options for the storage of service and role account credentials using a wide variety of industry-standard password storage schemes.</li>
<li>Feature ticket #BZ2315: Momentum can now authenticate users accessing Momentum services, such as the web interface, from an Active Directory infrastructure.</li>
<li>Feature ticket #BZ2314: Updated AD and Bounce Classification rules included with the release.</li>
<li>Feature ticket #BZ2240: Added new hookpoint, core_pre_esmtp_auth, called before we validate the client's response to any authentication challenges allowing response to be overridden on a per-connection basis to report successful or unsuccessful authentication.</li>
<li>Feature ticket #BZ2106: Adaptive Delivery ignores throttle rules if the domain in question does not have a valid throttle setting, either as a Momentum default or within the Adaptive Delivery rules.</li>
<li>Feature ticket #BZ2102: The default value for Adaptive Delivery Cache Expiration time has increased to improve the AD cache utilization.</li>
<li>Feature ticket #BZ2101: Added scriplets wrappers for thread pool statistics.</li>
<li>Feature ticket #BZ2100: Added a new scriptlet interface to disk usage information.</li>
<li>Feature ticket #BZ1930: The smtp_should_session_shutdown hook may now be used to shut down an SMTP session after a failed delivery attempt.</li>
<li>Feature ticket #BZ1561: Adaptive Delivery now supports a maximum outbound connections variable to allow an Administrator to define a maximum number of connections.</li>
<li>Fixed ticket #BZ2195: Fixed an issue introduced in 3.1.x where the default Sun malloc was being used instead of Umem resolving a potential performance degradation experienced by some customers running Solaris when upgrading from 3.0.x.</li>
<li>Fixed ticket #BZ2949: Resolved an issue where ec_rt_stats2 could crash when attempting to write or copy an invalid stat entry to the database. Ec_rt_stats2 will now log such an event for troubleshooting and continue to process the stats jlog file without interruption.</li>
<li>Fixed ticket #BZ2591: Added functionality to automatically load the Message Scope remediation file, which previously had to be loaded manually when Momentum was installed.</li>
<li>Fixed ticket #BZ2500: Lua scripts caused memory leak in some situations.</li>
<li>Fixed ticket #BZ1935: Resolved a crash when a domain record expires during TLS downgrade.</li>
<li>Fixed ticket #BZ1934: Resolved an ec_bag memory leak.</li>
<li>Fixed ticket #BZ1904: Adaptive Delivery now stops sending mail when a user performs a manual suspend to override Adaptive Delivery.</li>
<li>Fixed ticket #BZ1797: Expanded functionality to cause add_recipient to throw a sieve hard error when it is called for any phase except for each_rcpt during an ecstream session.</li>
<li>Fixed ticket #BZ1674: A faulty ClamAV configuration could cause false positives on non-infected mail.</li>
<li>Fixed ticket #BZ1514: The system could incorrectly leave DuraVIPs in an inconsistent state when removing them from a clustered configuration.</li>
<li>Fixed ticket #BZ950: Resolved defect preventing showqueue from working on a single binding.</li>
<li>Fixed ticket #BZ2861: Rotated log files not always compressed due to missing bzip2  in Momentum 3.1.3 installation script.</li>
<li>Fixed ticket #BZ2645: Actions changed for Adaptive Delivery rules for Hotmail.</li>
<li>Fixed ticket #BZ2640: The Momentum build now includes the dkim validation module (modules/validate/dkim.h)</li>
<li>Fixed ticket #BZ2567: AD now only takes action if there is a default value for the AD setting. The default value can be in either the ecelerity.conf or the adaptive_rules.ad. If no default value is defined, no AD action will be taken and the AD rule is ignored.  This change eliminates a confusing error message associated with missing default values for actions.</li>
<li>Fixed ticket #BZ2449: Fixed race conditions in thread pool sub-system which caused miscounted concurrency levels under certain conditions, this may lead to concurrency levels that are not reflected in user configuration.</li>
<li>Fixed ticket #BZ2397: Added functionality to correctly decode a Subject header with RFC2047 plus QP encoding to translate the '_' character to a space and to stop inserting an extra space when the header spans multiple lines.</li>
<li>Fixed ticket #BZ2220: Momentum now correctly displays "Uncommitted Changes Found" on the UI's Admin screen when exiting without saving changes.</li>
<li>Fixed ticket #BZ2189: Updated documentation to note that you must execute an additional config reload when changing from listening on a specific IP address to listening on the "wildcard" address (*) or the reverse (Linux systems only).</li>
<li>Fixed ticket #BZ2150: The Adaptive_Outbound_Throttle_Messages value can now be configured in the WebUI.</li>
<li>Fixed ticket #BZ2094: Corrected issue where Momentum will permanently fail an expired message with an expiration as bounce reason even if it has already been permanently failed due to another reason.</li>
<li>Fixed ticket #BZ2036: A bug was fixed that caused Momentum to crash when the binding fail domain command was used under certain circumstances.</li>
<li>Fixed ticket #BZ1991: Resolved situation with adding a new jlog subscriber whereby any subsequent jlog call from the new subscriber incorrectly indicated the subscriber didn't exist.</li>
<li>Fixed ticket #BZ1961: Corrected an issue where under certain circumstances doing a disconnect from a script did not return the expected disposition code/message.</li>
<li>Fixed ticket #BZ1933: Forwarding large volumes of mail requiring conversion from 8- to 7-bit character sets could result in crashes.</li>
<li>Fixed ticket #BZ1884: Changed error code send when "protocol deviation" is detected from a 550 to a 421.</li>
<li>Fixed ticket #BZ1829: The disclaimer module no longer adds dots/periods to the ends of lines, causing double-dots in the email message, when sending plain-text messages.</li>
<li>Fixed ticket #BZ1754: The disclaimer module no longer erroneously inserts quoted-printable encoded newlines.</li>
<li>Fixed ticket #BZ1752: Adaptive Delivery no longer sends Adaptive Summaries in duplicate.</li>
<li>Fixed ticket #BZ1713: ec_console did not always display the LOGIN prompt when authenticating against alternative authentication mechanisms, such as Active Directory.</li>
<li>Fixed ticket #BZ1235: Resolved an issue where under some circumstances bounce counts were inconsistent between total bounce counts and top 20 domains report in web UI.</li>
<li>Fixed ticket #BZ1232: Resolved an issue where under certain circumstances the Retry_Count could be inflated when using a very short retry_interval.</li>
<li>Fixed ticket #BZ963: UI Login error message made more descriptive when there is misconfiguration of the UI and a user fails to authenticate.</li>
<li>Fixed ticket #BZ2170: Momentum now disconnects if the client sends data before the banner, and disconnect_ratware is set.</li>
<li>Fixed ticket #BZ1898: Resolved issue whereby Async DSN generation with Sieve made an illegal memory access.</li>
</ul>

<h2><a name="3.1.7">Momentum 3.1.7 released on 2011-12-19</a></h2>
<ul>
<li>Fixed ticket #BZ4866: Replaced third party component used in bounce classification with improved Momentum Bounce Classifier.</li>
</ul>

<h2><a name="3.1.6">Momentum 3.1.6 released on 2011-04-20</a></h2>
<ul>
<li>Fixed ticket #BZ2845: Fixed a memory leak that exists only in Momentum 3.1.5.</li>
</ul>

<h2><a name="3.1.5">Momentum 3.1.5 released on 2011-04-14</a></h2>
<ul>
<li>Fixed ticket #BZ2772: Resolved an issue where ec_rt_stats would fail due to a database constraint violation.  This only affects upgrades.</li>
</ul>

<h2><a name="3.1.4">Momentum 3.1.4 released on 2011-04-11</a></h2>
<ul>
<li>Feature ticket #BZ2649: Add support for MMS VASP role over MM7 (mobility specific)</li>
<li>Feature ticket #BZ2651: Make the user interface fully aware of all supported protocols for reporting and management.</li>
<li>Feature ticket #BZ2652: Add an alternative REST-based injection protocol to Momentum</li>
<li>Feature ticket #BZ2653: Record SMS and MMS failed deliveries into the bouncelog and make general status notes available in logging and hooks.</li>
<li>Feature ticket #BZ1449: Allow mobility licensing to have an independent expiration from main server licensing (mobility specific)</li>
<li>Fixed ticket #BZ1386: Support Live Updates for Vendor Specific TLVs (mobility specific)</li>
<li>Fixed ticket #BZ1329: Addressed multi-byte issues in SMTP-SMPP Sms/Email Internetworking parse (mobility specific)</li>
<li>Fixed ticket #BZ1355: Change SMPP internetworking parse to parse subject if 'to' is not present (mobility specific)</li>
<li>Fixed ticket #BZ1359: Fix possible crash while processing certain delivery reports.</li>
<li>Fixed ticket #BZ1388: Add capabilities to process vendor specific TLV configurations (mobility specific)</li>
<li>Fixed ticket #BZ1403: Make MO SMS/Email internetworking parse configurable (mobility specific)</li>
<li>Fixed ticket #BZ1421: Adding submit_sm & deliver_sm message_payload support per SMPP v3.4 (mobility specific)</li>
<li>Fixed ticket #BZ1423: Allow for setting of SMPP ton and npi codes on a per-SMSC basis (mobility specific)</li>
<li>Fixed ticket #BZ1426: Allow more specific tuning of sms_data_coding and encoding_name mapping settings (mobility specific)</li>
<li>Fixed ticket #BZ1436: Move SMPP pre-conversion hook ahead of interworking_format parsing AND email_to look-up (mobility specific)</li>
<li>Fixed ticket #BZ1442: Add SMS MO_Email_Data_Coding context variable support (mobility specific)</li>
<li>Fixed ticket #BZ1452: Warn on invalid values for ton and npi (mobility specific)</li>
<li>Fixed ticket #BZ1454: Move check for numeric SMS destination to after MT post-convert hook (mobility specific)</li>
<li>Fixed ticket #BZ1456: Address issue with parsing message state from SMPP delivery receipt (mobility specific)</li>
<li>Fixed ticket #BZ1458: Fix issue where certain segments of a multi-segment SMS message could be resent (mobility specific)</li>
<li>Fixed ticket #BZ1485: Remove error messages for MT SMs when esme address not is present (mobility specific)</li>
<li>Fixed ticket #BZ951: Resolved issue where ec-rt-stats would prematurely terminate under some circumstances and causing a backup of logs on nodes.</li>
<li>Fixed ticket #BZ2017: Corrected an issue with the Advanced Configuration Editor that sometimes caused the UI to error when configuring some third-party modules.</li>
<li>Fixed ticket #BZ2029: The watch changes to this domain check box on the Domains page in the UI now correctly displays an X when the domain is in the watched domains list.</li>
<li>Fixed ticket #BZ929: Scriptlets engine can crash when registering an unknown argument type.</li>
<li>Fixed ticket #BZ1457: Fix crash when handling an internetworking parse of a multipart mime message with no text/plain component (mobility specific)</li>
<li>Fixed ticket #BZ1756: Improved error reporting when Adaptive Delivery is misconfigured by mistakenly omitting loading msys.adaptive in the configuration file.</li>
<li>Fixed ticket #BZ1986: Resolved an issue where DKIM signatures sometimes are canonicalized without the trailing CRLF, causing messages to fail authentication.</li>
<li>Fixed ticket #BZ1993: Changed BEIK module to singleton for compatibility with config reload functionality. (Momentum for Receiving required for AV/AS)</li>
<li>Fixed ticket #BZ2068: Resolved an issue where, under certain circumstances, messages are incorrectly moved from node to node in a clustered environment when all IPs for a particular domain are suspended by Adaptive Delivery.</li>
<li>Fixed ticket #BZ2145: Fixed an issue causing a crash when SMTP debugging or tracing is enabled and certain DNS MX conditions occur.</li>
<li>Fixed ticket #BZ2363: Resolved an issue where in certain circumstances the AV engine may fault. (Momentum for Receiving required for AV/AS)</li>
<li>Fixed ticket #BZ2553: Fixed an issue where the Lua database functions (msys.db) may incorrectly report an exception or cause a crash in limited load-related situations.</li>
</ul>

<h2><a name="3.1.3">Momentum 3.1.3 released on 2011-02-04</a></h2>
<ul>
<li>Fixed ticket #8179: Resolves an issue where heavy use of outbound throttles could cause performance degradation (both inbound and outbound) in Momentum 3.1.1 - 3.1.2. Setting &quot;clear_mail_queue_maintainers = &#39;true&#39;&quot; in Momentum 3.1.1 - 3.1.2 will also resolve this issue.</li>
</ul>

<h2><a name="3.1.2">Momentum 3.1.2 released on 2011-01-27</a></h2>
<ul>
<li>Fixed ticket #8150: Resolved an issue under which Momentum would crash on Linux when a point-to-point tunnel interface was plumbed.</li>
<li>Fixed ticket #8151: Resolved an issue where setting the message routing domain from lua, via msg:routing_domain(), would not take effect.</li>
</ul>

<h2><a name="3.1.1">Momentum 3.1.1 released on 2011-01-17</a></h2>
<ul>
<li>Fixed ticket #8069: Resolved an issue where null is incorrectly returned when using msys.audit namespace without including the cidr option</li>
<li>Fixed ticket #8071: Fixed an issue where message context data was not populated when msys.cidr.query was called from a hook, which could have caused a crash.</li>
</ul>

<h2><a name="3.1.0">Momentum 3.1.0 released on 2010-12-22</a></h2>
<ul>
<li>Feature ticket #2037: Third-party modules that utilize the memalign(3) or posix_memalign(3) memory management APIs on Linux no longer require that Momentum run with the system memory allocator.</li>
<li>Feature ticket #2451: Improved efficiency of core hash table implementation. Also added a tunable initial_hash_buckets option with default value appropriate for most customers. Please refer to the support site or contact support for information on tuning this option for your workload.</li>
<li>Fixed ticket #2619: Added support for Symantec Brightmail Engine Integration Kit, an in-process implementation of the Brightmail content scanner.</li>
<li>Fixed ticket #2894: Resolved an issue where the sieve &quot;reject&quot; action would incorrectly send an MDN if it was triggered in the rcptto phase</li>
<li>Fixed ticket #3172: Thread pool statistics are no longer skewed if the thread pool size is changed without restarting the instance.</li>
<li>Fixed ticket #3279: Setting clear_mail_queue_maintainers = true in your configuration file no longer results in system instability.  The purpose of setting this to true is to reduce the number of timed events.  This can help to reduce the load on the scheduler thread.</li>
<li>Fixed ticket #3460: The cluster manager will now clean up stale control cache data from its data store resolving and issue where the control cache would grow unbounded over time, slowly using more disk space.</li>
<li>Fixed ticket #3509: Fixed some very minor memory leaks that occurred in error conditions when accessing sqlite databases in the sched module and the ec_dkim_ctl utility.</li>
<li>Fixed ticket #4061: Recycled connections could cause hanging connections in rare cases</li>
<li>Fixed ticket #4098: Added support for the eXpurgate content scanner from Eleven. (Momentum for Receiving required for AV/AS)</li>
<li>Feature ticket #4607: The &quot;memory&quot; console command output now includes mallinfo() information. Also added &quot;xml memory&quot; console command that returns memory utilization information in XML form, suitable for machine processing. The peak memory displayed in the memory stats has changed so that it is now sampled twice per second.  This change results in reduced contention, improving performance.</li>
<li>Feature ticket #4683: Added core_validate_auth hook; this is triggered during SMTP authentication and allows a module to observe the results of authentication attempts.</li>
<li>Fixed ticket #4953: Sieve includes are now processed synchronously, just as they were in 2.2. This avoids the possibility of a deadlock that could occur in cases where multiple phases include the same sieve script.</li>
<li>Fixed ticket #5205: pe2_logger (a component used only with Message Central) could leak a small amount of memory when rotating through log files</li>
<li>Fixed ticket #5268: Improved performance and reliability of ec_rt_stats2 when it is talking to a database across a high latency link, such as a WAN.</li>
<li>Fixed ticket #5272: Resolved an issue where the web UI configuration editor would fail to validate configurations that stored lua scripts in the global (shared) configuration repo.</li>
<li>Feature ticket #5280: Added &quot;lifetime&quot; option to the sieve ec_dkim_sign action.</li>
<li>Feature ticket #5287: Added Lua msys.db.fetch_row convenience function for issuing a query against a datasource and returning a single row as a one-line action.</li>
<li>Feature ticket #5288: Added Lua msys.audit namespace, to expose the audit series capabilities to Lua scripts</li>
<li>Feature ticket #5289: Added Lua msys.cidr namespace, to expose CIDR capabilities to Lua scripts</li>
<li>Feature ticket #5290: Added Lua msys.gauge_cache namespace, exposing the Gauge Cache functionality to Lua scripts</li>
<li>Feature ticket #5292: Expanded the available methods of the validate context object available in Lua.  This enables modification of the recipient list, among other things.</li>
<li>Feature ticket #5293: Expanded the available methods of the accept construct object in Lua, providing the ability to advertise or suppress SMTP extensions, among other things.</li>
<li>Feature ticket #5294: Added msys.validate.dk and msys.validate.dkim functions to Lua to control DomainKeys and DKIM signing and validation in Lua scripts.</li>
<li>Feature ticket #5295: Added msys.goodmail functions to Lua, exposing Goodmail imprinting and validation functionality to Lua scripts</li>
<li>Feature ticket #5296: Added msys.antivirus functions to Lua, exposing Virus scanning functionality to Lua scripts (Momentum for Receiving required for AV/AS)</li>
<li>Feature ticket #5297: Added msys.brightmail.scan function to Lua; this exposes bm_driver functionality to Lua scripts. (Momentum for Receiving required for AV/AS)</li>
<li>Feature ticket #5298: Added msys.cloudmark functions to Lua, exposing Cloudmark Authority Engine content scanning functionality to Lua. (Momentum for Receiving required for AV/AS)</li>
<li>Feature ticket #5299: Added msys.commtouch functions to Lua, exposing Commtouch content scanning functionality to Lua. (Momentum for Receiving required for AV/AS)</li>
<li>Feature ticket #5300: Added msys.base64 and msys.qp functions to Lua, providing base64 and quoted-printable encoding and decoding functionality for Lua</li>
<li>Feature ticket #5302: Added msys.bounce.classify to Lua, exposing our bounce classifier functionality to Lua scripts</li>
<li>Feature ticket #5308: Added msys.rfc3464 functions to Lua, allowing Lua scripts to create and inspect RFC3464 compliant messages</li>
<li>Feature ticket #5317: Added ability to define audit series that are keyed by a string instead of a CIDR.  An individual audit series may be keyed by either a string or a CIDR; it may not use both. (Lua only)</li>
<li>Fixed ticket #5323: Fixed a minor memory leak in the sieve header comparator when the header being tested is made up of multiple lines.</li>
<li>Fixed ticket #5384: Work around a flaw in the Solaris kernel that causes the port_getn() system call to return invalid results in some rare cases.</li>
<li>Fixed ticket #5405: Added &quot;inbound_audit load&quot; console command to the inbound_audit module</li>
<li>Fixed ticket #5427: Expanded available CSAPI (Symantec Content Scanning Application Programming Interface) configuration options</li>
<li>Fixed ticket #5523: Fixed an issue preventing building of CPAN modules against the msys-perl package due to a missing ccache utility.</li>
<li>Fixed ticket #5610: The maximum allowed length of MAIL FROM and RCPT TO commands is now limited to 4k to avoid increased CPU utilization in the face of extremely long command lines. Note that other MTAs enforce smaller limits.</li>
<li>Fixed ticket #5650: Expose DKIM verification results via C API</li>
<li>Fixed ticket #5652: Added ability to set the permastore_interval to 0 to turn off periodic writes to the permastore layer.  The system will update it when the process exits.  This facility is responsible for preserving binding statistics and summary data across Momentum process restarts.</li>
<li>Fixed ticket #5665: The lua datasource bindings would not reliably execute when used prior to the data_spool validation phase.</li>
<li>Fixed ticket #5900: Depending on the ordering of stanzas in your configuration file, you may have seen &quot;Unsupported or unknown action commtouch_scan&quot;, even though all pertinent modules were specified in the configuration file.</li>
<li>Fixed ticket #5909: Cluster shared throttle calculation would incorrectly use a lower rate than was configured in the configuration file.</li>
<li>Feature ticket #5930: All content scanning modules now record statistics on scanned, virus and spam volume metrics.  These metrics are exposed via the counters subsystem and can be reviewed via ec_console.</li>
<li>Fixed ticket #5951: The configuration file parser will now accept port numbers larger than 32767.</li>
<li>Fixed ticket #5964: Added ImageAnalyzer image content scanning support. (Momentum for Receiving only)</li>
<li>Fixed ticket #6033: Symantec Brightmail (bm_driver) now works with mixed-case domains. (Momentum for Receiving required for AV/AS)</li>
<li>Fixed ticket #6040: Improved performance of the ec_cache facility, resulting in improved performance in the configuration system and Adaptive Delivery, among other areas of the product.</li>
<li>Fixed ticket #6093: The web UI would not always reflect your pathway filter selection in the &quot;Selected Filters&quot; bar</li>
<li>Fixed ticket #6237: Added Allow_Trailing_Whitespace_In_Commands and Allow_Whitespace_In_Envelope to permit whitespace at end of SMTP commands or in Envelope addresses</li>
<li>Fixed ticket #6256: Non-compliant, excessively long SMTP headers could cause excessive CPU usage</li>
<li>Fixed ticket #6258: It is now possible to use &quot;config reload&quot; to cause the cluster manager (eccmgr) process to reload its configuration file. NOTE: No change to the &quot;config reload&quot; of the Momentum process - this continues to work as before.</li>
<li>Feature ticket #6274: Optimizations in the configuration system resulting in improved overall product performance.</li>
<li>Fixed ticket #6277: Resolved an issue where under certain circumstances, when using threaded listeners with the Accept_Queue_Backlog set, the system would get out of sync and eventually be unable to accept new mail on that listener.</li>
<li>Feature ticket #6312: Synchronized Linux umem implementation with current Solaris sources.</li>
<li>Fixed ticket #6316: Improved usability of the Web UI &quot;Paths&quot; tab. (Momentum for Receiving)</li>
<li>Fixed ticket #6324: Resolved an issues where replicated audit_series data would be double-counted each time the configuration was reloaded.</li>
<li>Fixed ticket #6325: Resolved an issue where setting ECELERITY_MEMORY=SYSTEM on Linux could result in a crash.</li>
<li>Fixed ticket #6342: Fixed and issue where message bodies using quoted-printable encoding could become corrupted when re-encoded as Base64 (e.g. using Disclaimer module)</li>
<li>Feature ticket #6406: You may now provision IPv6 listeners.  Note that some policy functions (notably CIDR and audit series) will NOP (take no action, report no counts) for messages receiving over IPv6.  You may check the recv_via property of a message to determine if it was received over an IPv6 connection.</li>
<li>Fixed ticket #6410: Resolved an issue where domains with long-term intermittent DNS resolution failures could be erroneously purged, due to a an internal counter not being reset when a successful DNS lookup for that domain completes.</li>
<li>Fixed ticket #6497: Fixed an issue that would cause the eccmgr console to output the results of the &quot;threads stats&quot; command twice.</li>
<li>Fixed ticket #6508: Use of Suppress_spool could cause ecelerity to hang in certain circumstances with large max_resident_messages</li>
<li>Feature ticket #6516: MIME parser now utilizes optimized SSE CPU extensions, resulting in improved performance especially with messages larger than 16kb.</li>
<li>Fixed ticket #6691: Resolved an issue where under some circumstances lua msg:text() incorrectly returned blank text.</li>
<li>Feature ticket #6710: Reduced latency of atomic increment operations in the core Momentum code.</li>
<li>Feature ticket #6809: Improved cache sub-system and implemented new cache algorithms resulting in across-the-board product performance improvements and improved cache observability.</li>
<li>Fixed ticket #6810: SMF start/stop timeouts are now being respected in the Solaris Momentum start script.</li>
<li>Feature ticket #6855: Exposed DNS resolution hooks via C API</li>
<li>Fixed ticket #6934: Resolved issue where active and delayed queue graphs displayed inflated counts for zoom levels greater than one hour.</li>
<li>Feature ticket #6983: Improved adaptive delivery suspension processing. This results in reduced latency and improved throughput in the presence of suspensions.</li>
<li>Fixed ticket #6990: Injecting over 2GB of messages on same connection will no longer trigger &quot;message size limit exceeded&quot; error.</li>
<li>Fixed ticket #7018: A &quot;config reload&quot; will not cause the adaptive module to purge its caches</li>
<li>Fixed ticket #7020: Resolve minor memory leaks on config reload for alerting module cache.</li>
<li>Fixed ticket #7051: Resolved a possible fault on Solaris when using the cluster module and initiating a connection to a host with a long name</li>
<li>Feature ticket #7112: Add Delayed_Binding_Domain_Fuzz and Adaptive_Retry_Fuzz options to allow greater control over bulk message retries, such as when all messages for a domain have to be retried (e.g. after a suspension has been lifted).</li>
<li>Fixed ticket #7129: Adaptive bounce percentage will now only take hard failures and deliveries into account rather than only delivery attempts.</li>
<li>Fixed ticket #7144: Fixed issue where FBL module was not writing to the log file under Solaris.</li>
<li>Fixed ticket #7168: Improved system performance when blackhole is enabled for a queue that already has messages in it (especially with large queues)</li>
<li>Fixed ticket #7464: Added/improved message creation and modification functions available to Lua</li>
<li>Feature ticket #7531: Improved spinlock performance.  Added reader/writer spinlock API facility.</li>
<li>Feature ticket #7565: A &quot;config reload&quot; will no longer cause datasource caches to be purged.</li>
<li>Feature ticket #7646: Added msys.expurgate functions to Lua, exposing Eleven eXpurgate functionality to Lua scripts. (Momentum for Receiving required for AV/AS)</li>
<li>Feature ticket #7731: Added a new counter facility that replaced the sieve specific counter facility.  There is no visible change to users of the existing sieve counter functionality. The new facility provides a great deal more information and flexibility; consult the manual for more details.</li>
<li>Fixed ticket #7732: The &quot;Real-time statistics&quot; tabulated data on the Web UI dashboard has been renamed to &quot;Summary Statistics&quot;</li>
<li>Fixed ticket #7733: The Active and Delayed queue numbers have been separated out from the Summary Statistics portion of the Web UI dashboard.</li>
<li>Feature ticket #7737: The Web UI now includes a &quot;Reset Statistics&quot; button next to the &quot;Summary Statistics&quot; information</li>
<li>Feature ticket #7742: Momentum may now initiate outbound connections over IPv6</li>
<li>Feature ticket #7790: Added msys.counter namespace, exposing the new generic counter facility to Lua scripts.</li>
<li>Fixed ticket #7832: Resolved an issue where the Lua msg:routing_domain() function could raise an error when used to set the routing domain for a message.</li>
<li>Fixed ticket #7878: Fixed issue preventing the SMTP callback verification module from supporting customizable callback verification domain mapping for the &quot;mail from&quot; phase.</li>
<li>Fixed ticket #7916: the sieve ec_dkim_domains function would omit data for signatures without an &quot;i=&quot; tag</li>
<li>Fixed ticket #7918: Resolved an issue where defining multiple Lua modules that both yield/resume in the data phase could result in a fault.</li>
<li>Fixed ticket #7919: Improved perceived performance of the Momentum web UI by adjusting the default Apache configuration</li>
<li>Fixed ticket #7923: Nodes could show as offline on the web UI status tab for a few minutes following a change of the administrator password</li>
<li>Fixed ticket #7925: The Web UI Paths tab could show inconsistent data between the date range and &quot;past few days&quot; display. (Momentum for Receiving)</li>
<li>Fixed ticket #7927: Momentum would incorrectly determine that a 251 response (user not local) received while delivering to a remote MTA was an error condition</li>
<li>Fixed ticket #7939: The Web UI &quot;stats&quot; tab (which shows mail queue statistics) now shows correct data when filter selection includes bindings that are not configured on some or all of the nodes. (Example: bindings that were present in the past, but have subsequently been removed from the configuration).</li>
<li>Fixed ticket #7940: The Web UI is now able to configure the postfix_logger module; previously it had to be configured manually.</li>
<li>Fixed ticket #7956: The Web UI now shows current version information on all the nodes, even those that have been upgraded but not passed any traffic since upgrading.</li>
<li>Fixed ticket #7961: F-Secure AV is no longer supported in the 3.X receiving bundle.</li>
<li>Feature ticket #7968: The support offering of the Momentum product includes the Live Bounce Updates service at no additional cost for 3.X customers with current Support Agreements. Live Bounce Updates is enabled by default when installing Momentum 3.1 or higher when bounce_logger is enabled in ecelerity.conf. See support site for additional configuration options including turning on or off uploading your anonymized bounce data to Message Systems.</li>
<li>Fixed ticket #7978: Improved rendering of the Momentum web console for IE7 and IE8 browsers</li>
<li>Fixed ticket #7984: Fixed an issue where Web UI Message Size report could understate the maximum message size.</li>
<li>Fixed ticket #8003: Changed the default setting of &quot;async&quot; for Sieve hooks scripts to &quot;false&quot;</li>
<li>Fixed ticket #8010: Resolved an issue where Pathway filter was not properly respected on dashboard.</li>
<li>Fixed ticket #8019: Improved Adaptive Delivery rules for yahoo.com, hotmail.com and gmail.com.</li>
<li>Fixed ticket #8026: Resolved an issue where the User Administration Credentials sub-tab was not correctly displaying for users that were promoted from a standard user to the admin (super user) group.</li>
</ul>

<h2><a name="3.0.28.1">Momentum 3.0.28.1 Sending released on 2010-11-03</a></h2>
<ul>
<li>Fixed ticket #7865: Dashboard page summary tables would never display (spinning icon).</li>
<li>Fixed ticket #7871: Fixed an issue in handling idle timeouts in the ecmm module.  Fixed an issue that limited the maximum message size to 4k when using ecmm.</li>
</ul>

<h2><a name="3.0.28">Momentum 3.0.28 Sending released on 2010-10-18</a></h2>
<ul>
<li>Feature ticket #5436: Increased granularity of graphs on dashboard.</li>
<li>Fixed ticket #6934: Resolved issue where active and delayed queue graphs displayed inflated counts for zoom levels greater than one hour.</li>
<li>Fixed ticket #6997: Changed the default retention setting for the six hour stats roll-up data from 730 days to 30 days to reduce database size and speed web UI performance. This value can be overridden in the config file.</li>
<li>Fixed ticket #7144: Fixed issue where FBL module was not writing to the log file under Solaris.</li>
<li>Fixed ticket #7159: Corrected issue where batch and connection ID&#39;s in permfail log did not match other logs for a given message.</li>
<li>Fixed ticket #7198: Statp module would not properly populate active and delayed stats when watchlist_only = true.</li>
<li>Fixed ticket #7274: Upgraded provided Apache (2.2.16) and PHP (5.2.14) to include upstream security patches.</li>
<li>Fixed ticket #7426: Resolved issue editing node-specific config files with webui, including setting EHLO_HOSTNAME for default binding.</li>
</ul>

<h2><a name="3.0.26">Momentum 3.0.26 Sending released on 2010-09-01</a></h2>
<ul>
<li>Feature ticket #6809: Improved cache sub-system and implemented new cache algorithms resulting in across-the-board product performance improvements and improved cache observability.</li>
<li>Feature ticket #6983: Improved adaptive delivery suspension processing. This results in reduced latency and improved throughput in the presence of suspensions.</li>
<li>Fixed ticket #6990: Injecting over 2GB of messages on same connection will no longer trigger &quot;message size limit exceeded&quot; error.</li>
<li>Fixed ticket #7020: Resolve minor memory leaks on config reload for alerting module cache.</li>
<li>Feature ticket #7112: Add Delayed_Binding_Domain_Fuzz and Adaptive_Retry_Fuzz options to allow greater control over bulk message retries, such as when all messages for a domain have to be retried (e.g. after a suspension has been lifted).</li>
<li>Fixed ticket #7129: Adaptive bounce percentage will now only take hard failures and deliveries into account rather than only delivery attempts.</li>
</ul>

<h2><a name="3.0.24">Momentum 3.0.24 Sending released on 2010-06-23</a></h2>
<ul>
<li>Feature ticket #5057: Removed unused memory pool API functions from the SDK.  These were never implemented and never used.</li>
<li>Fixed ticket #5555: It was possible to leak an Event in some rare circumstances</li>
<li>Fixed ticket #5679: Possible fault during shutdown after processing an invalid ecelerity.conf file</li>
<li>Fixed ticket #5681: Added the net_rawaccess privilege to the default privilege set in the sample ecelerity.conf.  This fixes a license validation problem that resulted in an error being logged every 15 minutes on Solaris.</li>
<li>Fixed ticket #5691: Using the ec_set_routing_gateway sieve action could result in messages being stuck in the lookuptable and never being delivered.</li>
<li>Fixed ticket #5698: Improved performance when determining the value of configuration options that can be set in the Pathway scope and when querying configuration with Seive and Lua.</li>
<li>Fixed ticket #5843: Limit the Bounce report to show the top 20 domains to improve the performance of the bounce report, and to avoid overloading the web browser with data.</li>
<li>Fixed ticket #5845: Possible deadlock when performing binding group assignments when Adaptive Delivery is configured.</li>
<li>Fixed ticket #5886: Improved reliability of Ecelerity::Injector if and when it receives a signal during sending</li>
<li>Feature ticket #5927: The product now requires a license file tied to the version and product type.  Your license should update automatically as part of starting the service.  If you encounter problems with your license file, contact support.</li>
<li>Fixed ticket #5966: Miscellaneous performance and general improvements to Adaptive Delivery</li>
<li>Fixed ticket #6036: Adaptive Delivery does a better job at recognizing domains that are aliases of other well known domains and will apply shaping and disposition rules more consistently to those domains.</li>
<li>Fixed ticket #6042: Reduced lock contention in Adaptive Delivery, resulting in improved performance.</li>
<li>Feature ticket #6130: On Linux, the installer now checks the value of SOMAXCONN (max open sockets) and recommends to the user that it be set higher than 1024 for better performance.</li>
<li>Fixed ticket #6165: If Adaptive Delivery opts to blackhole mail, this is now shown in the summary report mail</li>
<li>Fixed ticket #6167: When Adaptive Delivery suspends a domain, it will now move the mail into the delayed queue to reduce the amount of ongoing maintenance work that the system performs.  This results in improved performance in situations where a number of binding-domains are suspended.</li>
<li>Fixed ticket #6173: Increase named_throttles default cache size to 1000, since Adaptive Delivery makes such heavy use of throttles.  Depending on site, this value may need to be much higher.  Set using global config option &quot;siv_throttle_cache_size&quot;</li>
<li>Feature ticket #6244: Improved performance of the ec_ptr_array datastructure, used heavily in the configuration system.  Results in improved overall product performance.</li>
<li>Fixed ticket #6247: The Solaris installer would fail to create multiple subclusters, requiring manual intervention.</li>
<li>Fixed ticket #6278: Adaptive Delivery could incorrectly suspend all bindings for a given domain if any one binding exceeded a 10% bounce rate.</li>
<li>Fixed ticket #6311: Updated the apache package  included with Message Central to version 2.2.15</li>
<li>Fixed ticket #6324: Resolved an issues where replicated audit_series data would be double-counted each time the configuration was reloaded.</li>
<li>Fixed ticket #6360: Increased the default max_connections setting in our postgres database packaging, improving performance of various database related activities, especially Message Central.</li>
<li>Fixed ticket #6368: Resolved potential instability when using the cluster module and reloading the configuration file.</li>
<li>Fixed ticket #6519: Memory leak when using msys.db datasource functions.  If you are using these, you will need to add a require(&#39;msys.datasource&#39;) line to your lua scripts in addition to the require(&#39;msys.db&#39;) line.</li>
</ul>

<h2><a name="3.0">Momentum Receiving 3.0 EA released on 2010-03-15</a></h2>
<ul>
<li>Feature ticket #4299: Audit series now support a serialized flag that can be set when they are created.  Serialized audit series are written to disk periodically.</li>
<li>Fixed ticket #5242: Resolves javascript error that was causing password changes to be silently discarded.</li>
<li>Feature ticket #5318: Audit series data is now persistent.  The data is serialized to disk on shutdown and read in on start up.</li>
<li>Fixed ticket #5418: The webui would not accept certain characters in any field supporting regular expressions (specifically &#39;+&#39; and &#39;/&#39;).  There is no workaround for earlier releases.</li>
<li>Fixed ticket #5555: It was possible to leak an Event in some rare circumstances</li>
<li>Fixed ticket #5619: When the Adaptive Delivery module periodically updates its backing store database, it no longer blocks outgoing connections until the update is complete.</li>
<li>Fixed ticket #5621: Improved performance of the statp module.  Gathering statistics will no longer perturb the internal mail queue data structures and disk I/O is now performed on a separate thread.</li>
<li>Fixed ticket #5681: Added the net_rawaccess privilege to the default privilege set in the sample ecelerity.conf.  This fixes a license validation problem that resulted in an error being logged every 15 minutes on Solaris.</li>
<li>Feature ticket #5686: New Rejections Report summarizes reasons why messages were rejected (spam, no relay, etc).</li>
<li>Fixed ticket #5691: Using the ec_set_routing_gateway sieve action could result in messages being stuck in the lookuptable and never being delivered.</li>
<li>Fixed ticket #5698: Improved performance when determining the value of configuration options that can be set in the Pathway scope and when querying configuration with Seive and Lua.</li>
<li>Fixed ticket #5700: Using a sieve script that calls the sieve dkim_sign action could result in a fault after a &quot;config reload&quot; had been processed.</li>
<li>Fixed ticket #5722: Fixed a memory type mismatch that could result in a crash when the cluster module is loaded.</li>
<li>Fixed ticket #5847: Fix clamav support accidentally broken in 3.0.20.</li>
<li>Fixed ticket #5875: Update Lua package to fix obscure mathematical operator precedence bug.</li>
</ul>

<h2><a name="3.0.22">Momentum 3.0.22 released on 2010-03-09</a></h2>
<ul>
<li>Fixed ticket #5385: Using &#39;sanitize = &quot;no&quot;&#39; stanza with a custom_logger stanza would not reopen logs after &#39;config reload&#39; was issued.  Deleting that stanza entirely works around the problem for earlier releases.</li>
<li>Fixed ticket #5418: The webui would not accept certain characters in any field supporting regular expressions (specifically &#39;+&#39; and &#39;/&#39;).  There is no workaround for earlier releases.</li>
<li>Fixed ticket #5543: The MIME parser would &quot;not see&quot; MIME parts of type &quot;message/&quot; in some circumstances, impacting the FBL module when it was used with legacy modules that had run earlier in the validation process.</li>
<li>Fixed ticket #5619: When the Adaptive Delivery module periodically updates its backing store database, it no longer blocks outgoing connections until the update is complete.</li>
<li>Fixed ticket #5621: Improved performance of the statp module.  Gathering statistics will no longer perturb the internal mail queue data structures and disk I/O is now performed on a separate thread.</li>
<li>Fixed ticket #5630: Answers to DNS queries larger than the standard UDP DNS packet size could result in a watchdog reset. The behavior of Momentum when a UDP DNS packet contains truncated data is now configurable (either drop the packet or fall back to TCP). The default behavior is to drop truncated packets.</li>
<li>Fixed ticket #5647: Database rollup script could fall behind if one or more nodes is behind.</li>
<li>Fixed ticket #5668: The Adaptive Delivery module will no longer attempt to suspend domains where the Adaptive_Enabled option is not set to true.</li>
<li>Fixed ticket #5669: The Adaptive Delivery summary script will now accept the --bouncelog command line option as the documentation states.</li>
<li>Feature ticket #5675: Improve performance by changing internal locking method of various functions.</li>
<li>Fixed ticket #5681: Added the net_rawaccess privilege to the default privilege set in the sample ecelerity.conf.  This fixes a license validation problem that resulted in an error being logged every 15 minutes on Solaris.</li>
<li>Feature ticket #5682: Performance when assigning a message to a binding group with a large number of members has been significantly improved.  This affects sieve scripts that use ec_set_binding to do binding assignment where the binding is part of a binding group with a large number of bindings.  A workaround for earlier releases is to split up large binding groups into smaller ones.</li>
<li>Feature ticket #5683: The amount of time to wait before retrying a failed DNS query now has a random element applied to it in order to avoid overloading the DNS server with a huge number of simultaneous queries.</li>
<li>Feature ticket #5699: Max_Timed_Events_Per_Iter (default 1024) is now a configurable limit to the number of time-based events that will be processed by the scheduler before tending to events triggered by network traffic.  This prevents network events (e.g. inbound e-mail) from being starved by time-based events (e.g. outbound queue management), which could happen on systems with a very large number of domains.  On affected systems, the server will now seem more responsive.</li>
<li>Fixed ticket #5700: Using a sieve script that calls the sieve dkim_sign action could result in a fault after a &quot;config reload&quot; had been processed.</li>
<li>Fixed ticket #5722: Fixed a memory type mismatch that could result in a crash when the cluster module is loaded.</li>
<li>Fixed ticket #5847: Fix clamav support accidentally broken in 3.0.20.</li>
<li>Fixed ticket #5875: Update Lua package to fix obscure mathematical operator precedence bug.</li>
<li>Fixed ticket #5876: Resolve possible crash in ecstream when running in a cluster.</li>
</ul>
<h2><a name="3.0.21">Momentum 3.0.21 (Sending) released on 2010-02-04</a></h2>
<ul>
<li>Fixed ticket #5420: Fix memory leak in ec_bag memory type introduced in 3.0.17.  Injections using ecstream will not exhibit the leak.</li>
</ul>
<h2><a name="3.0.20">Momentum 3.0.20 (Sending) released on 2010-02-01</a></h2>
<ul>
<li>Feature ticket #3304: A new sieve action (ec_gmsi_sign) has been added, allowing scripts to trigger Goodmail signing of a message.</li>
<li>Fixed ticket #4656: ecconfigd could fault when joining a multi subcluster environment where one subcluster was already being managed by a remote ecconfigd.</li>
<li>Fixed ticket #4796: Synchronize hooks with config system commits; this prevents the race that caused messages to be DKIM signed multiple times.</li>
<li>Feature ticket #5009: Add support for clamav protocol 0.95</li>
<li>Feature ticket #5086: The feedback loop module is now capable of processing Hotmail-format FBL messages.  Previous versions of Momentum could only process FBL messages in ARF format.</li>
<li>Fixed ticket #5111: Enforce required configuration values for GMSI_Imprinter.  Releases prior to 3.0.18 could crash if one or more values were missing.</li>
<li>Fixed ticket #5147: The web UI was unable to edit configurations that contain a sieve script specifying the ec_bounce_classify sieve action.  This was due to the config shim not recognizing ec_bounce_classify as a valid sieve action.  A workaround for previous releases is to only use ec_bounce_classify in an include file.</li>
<li>Feature ticket #5155: Defer connecting to the Goodmail multiplexor until we have determined whether or not the message needs to be imprinted.  In previous releases, the connection to the multiplexor was made before determining whether or not the messaged needed to be imprinted.</li>
<li>Fixed ticket #5162: The FBL module now allows @-characters in the user string.</li>
<li>Fixed ticket #5175: Improve error handling in ODBC datasource driver.</li>
<li>Fixed ticket #5183: The &quot;binding delayed&quot; and &quot;binding summary&quot; ec_console commands now use the same method when computing the number of message in the delayed queue.  In previous versions of Momentum, the number of messages reported by &quot;binding delayed&quot; could be higher than the count reported by &quot;binding summary&quot; in some cases.</li>
<li>Feature ticket #5210: The Adaptive Delivery module now includes custom rules to better respond to SMTP error messages from rr.com (Road Runner).</li>
<li>Fixed ticket #5222: Automatic license fetch was not downloading a new license until 11:59pm of the day the current license expires, which could lead to Ecelerity failing the license check during the gap.  Workaround is to delete/rename the existing license and running `/opt/msys/ecelerity/bin/ec_lic_wrapper -f`.</li>
<li>Feature ticket #5230: Added many lua helper functions.</li>
<li>Fixed ticket #5246: Long DKIM identity could cause malformed DKIM signature due to improper wrapping.</li>
<li>Fixed ticket #5261: Fixed an issue in the Lua validate_ehlo hook where the EHLO parameter was passed to the hook with embedded nuls. The EHLO parameter is now passed to the hook with a CRLF line ending.</li>
<li>Fixed ticket #5270: Antivirus modules would not properly set the xyz_status_info variable in the message vctx for infected files when the av action was set to &quot;pass&quot; where xyz is the name of the antivirus module.</li>
<li>Fixed ticket #5274: The cron job that commits the node&#39;s running config every 5 minutes could accidentally commit outstanding changes in the conf/global directory.</li>
<li>Fixed ticket #5285: Listeners defined with duravip_follow would not follow their bindings.</li>
<li>Fixed ticket #5334: Running a sieve script in the final_validation hook and attempting to change certain headers (e.g. MAILFROM and ReturnPath) would not update the messages to seedlist.  All sieve scripts that alter the message contents/headers must be run during seedlist_generate_seed.</li>
<li>Fixed ticket #5338: Statp watchlist was cleared too early under certain circumstances.</li>
<li>Fixed ticket #5340: Header names longer than 997 characters could cause crash during spool-out.</li>
<li>Fixed ticket #5350: Enhance code scanner to properly generate .ecm files for antivirus/avengine modules.</li>
<li>Fixed ticket #5354: Disallow headers without values; correctly handle excessive whitespace in wrapped header values.</li>
<li>Fixed ticket #5358: Using &#39;commit --add-all&#39; would not consistently recurse into new directories.</li>
<li>Feature ticket #5402: The Adaptive Delivery module will now discard messages that solicit a TS03 reply from yahoo.com instead of retrying them at a later date.  This prevents the delayed queue from filling up with messages that will never be accepted.</li>
<li>Fixed ticket #5416: Resolve issue under Solaris where multiple interfaces would all display the same MAC address.</li>
<li>Fixed ticket #5447: A message of a very specific size and content (final CRLF.CRLF crossing a growbuf boundary) could cause a hang during DATA.</li>
<li>Fixed ticket #5475: Add ecgmsmultiplexer to the list of services to start at the end of installer (if goodmail is selected).</li>
<li>Fixed ticket #5476: Subcluster names were unintentionally forced to lowercase, which would cause problems if a subcluster was created with the install as mixed case.  Earlier releases have to limit subcluster names to lower case.</li>
<li>Feature ticket #5544: The pe2_logger module now supports an optional identifier in the VERP address immediately preceding the five hexidecimal numbers.  This identifier must include at least one non-hexidecimal character to avoid ambiguity with the fields that follow it.  If the new &quot;default_ident&quot; option is specified in the config file, the identifier will be included in the log file name.</li>
<li>Fixed ticket #5561: A use after free bug was present in the scriptlet module which could result in a crash when scriptlets are in use.</li>
<li>Fixed ticket #5576: Deleting a directory with eccfg would sometimes offer to add the directory back when using commit.</li>
<li>Fixed ticket #5604: The cluster module had a reference counting bug that resulted in the old configuration not being cleaned up when a &quot;config reload&quot; was performed.  As a result, configuration-related resources used by modules were never freed when the configuration included the cluster module.</li>
</ul>

<h2><a name="3.0.19">Momentum 3.0.19 released on 2009-12-14</a></h2>
<ul>
<li>Fixed ticket #5279: Fixed memory leak in the fbl (Feedback Loop) module when the feedback-report message part had multiple occurrences of a header.</li>
<li>Fixed ticket #5417: Resolve minor memory leak when certain options are set in an ACL context.</li>
</ul>

<h2><a name="3.0.18">Momentum 3.0.18 released on 2009-11-18</a></h2>
<ul>
<li>Fixed ticket #5352: Use of the lua functions get_mess_recv_via and get_mess_recv_from could cause duplicate messages to be resent after restart in cluster only configurations.</li>
</ul>

<h2><a name="3.0.17">Momentum 3.0.17 released on 2009-11-06</a></h2>
<ul>
<li>Fixed ticket #3360: &quot;xml cluster shared list&quot; spelled GaugeTable as GuageTable.  This has now been corrected.</li>
<li>Fixed ticket #4498: Outbound connections could fail to retry secondary MX if initial connection failed during banner.</li>
<li>Fixed ticket #4614: Legacy modules could be invoked on messages larger than legacy_message_threshold if the message was swapped out to disk.</li>
<li>Fixed ticket #4687: Header modification prior to a MIME parse on a malformed MIME message resulted in a length mismatch when rendering the message, causing it to be rejected.  For example, calling ec_header_add before a call to ec_mime_parts would trigger the problem.</li>
<li>Feature ticket #4689: Avoid compiler warnings when building modules with pure C++ hooks.</li>
<li>Fixed ticket #4760: A syntax error in a dynamically loaded sieve script could result in a memory leak.</li>
<li>Feature ticket #4773: The sieve_inc_counter function is now an exported API.</li>
<li>Feature ticket #4857: Added a Signing_Stats option that can be set to one of &quot;all&quot; (the default), &quot;global&quot; or &quot;off&quot; to control whether signing stats are recorded per binding, as a global summary summary only, or to disable signing stats metrics.  You might consider enabling this option if you have a very large number of bindings and don&#39;t need to track message signing statistics (such as Domain Keys or DKIM) per binding (or even at all).</li>
<li>Fixed ticket #4906: Sieve++ action ec_rfc3464_delivery_status did not work correctly in hash mode.</li>
<li>Feature ticket #4992: A hook has been added to allow modules to make changes to the message body before delivery.</li>
<li>Fixed ticket #4994: The logic in eccfg to determine the preferred config repository has been fixed.</li>
<li>Fixed ticket #4995: The alerting module could leak memory of the ec_cache_key and malloc type.</li>
<li>Fixed ticket #4996: The ec_rt_stats2 utility will now skip jlog entries that it can tell have been corrupted.</li>
<li>Fixed ticket #4997: Fixed a memory leak of the string memory type in the ds_core module when performing a query.</li>
<li>Fixed ticket #4998: The installer could be confused and fail if the cluster manager nodename is a substring of one of the MTA nodes nodename.</li>
<li>Fixed ticket #5000: Subclusters created via the web UI would have their names forced to lowercase.</li>
<li>Fixed ticket #5001: A minor dirent and memory leak on each configuration reload.</li>
<li>Feature ticket #5014: Improved memory counter lock performance on non-NUMA systems.</li>
<li>Fixed ticket #5036: ec_logger and custom_logger would always log the Pathway Group as &quot;default&quot;</li>
<li>Fixed ticket #5052: Configuring the Outbound_Throttle_Messages or Outbound_Throttle_Connections settings in a Binding default {} stanza would throttle all bindings, as if they had been configured in the global scope instead.</li>
<li>Fixed ticket #5059: hash_get and hash_set sieve functions now return an error when passed an argument that is uninitialized or not a hash.</li>
<li>Fixed ticket #5076: It is now possible to add options to an empty Datasource stanza in the web UI.</li>
<li>Fixed ticket #5082: Potential use of memory after it was freed in the spf module that could result in a failure to expand spf macros under heavy load.</li>
<li>Fixed ticket #5084: ec_log_trace could confuse an MTA node with a manager node and analyze the wrong files.  Passing --main will force the mainlogs to be used.</li>
<li>Fixed ticket #5085: If several bounces of the same type are received within a short period of time, the Adaptive Delivery module could send multiple alerts.</li>
<li>Fixed ticket #5087: Adaptive delivery now caches its values and syncs this cache with the database periodically in a different thread instead of updates synchronously.  This results in a large speedup on systems with slow I/O subsystems.</li>
<li>Fixed ticket #5088: Improve initiate_connection to be protocol-agnostic, return the connection handle and mark the MX as bad when connect() returns ECONNREFUSED or ENETUNREACH. The initiate_connection, initiate_connection_smtp and log_client_connection_failure hook APIs are affected. When we get a ECONNREFUSED or ENETUNREACH error from connect() or when the _handleconnect callback gets an exception, we now try to connect to another MX immediately (provided they are not all marked bad).</li>
<li>Fixed ticket #5095: The msys.policyeditor.send_email lua function can now send messages to multiple recipients.</li>
<li>Fixed ticket #5099: ec_log_file sieve action did not use the IO wrapper framework in a thread-safe manner.  This could result in a crash under load when logging to a jlog via ec_log_file.</li>
<li>Fixed ticket #5103: On a very busy systems it is possible for a cache node to be freed while there is still an active reference to it.  This can result in a crash with the error &quot;MEM-00363: X found vs Y expected&quot; where Y is usually 97.</li>
<li>Fixed ticket #5108: Disclaimer module could corrupt messages that were received as part of a batch, were MIME singletons and when using additional policy logic in the each_rcpt phase.</li>
<li>Fixed ticket #5115: On very busy systems with configurations that make heavy use of the caching infrastructure (such as Adaptive Delivery), it is possible to receive a watchdog reset where the main thread is blocked in the pthread_cond_wait function.</li>
<li>Fixed ticket #5121: The bounce_logger module could modify memory after freeing it when receiving an out of band bounce with a bounce class of 70 (transient bounce) or 80 (subscribe request).  On a system with high memory utilization, this could corrupt memory in use, potentially causing a crash.</li>
<li>Fixed ticket #5122: The adaptive module now supports the Adaptive_Alert_Email_Sender configuration option to specify the sender address of the Adaptive Delivery alert email.</li>
<li>Fixed ticket #5124: On Solaris systems, when uninstalling Momentum the crontab entries added by the installer were not correcly removed.</li>
<li>Fixed ticket #5127: On Solaris systems, users created as part of the Momentum install now have the correct home directory specified in the password database.</li>
<li>Fixed ticket #5135: Fixed active delivery suspensions.  Even though an alert fired, the domain was not actually being suspended.</li>
<li>Fixed ticket #5137: &quot;eccfg status&quot; now assumes that you&#39;re interested in the status of the default conf directory, just like the other eccfg sub-commands.</li>
<li>Fixed ticket #5138: The &quot;eccfg resolve&quot; command could emit harmless &quot;uninitialized value in string eq&quot; notices for certain entries in the config checkout.</li>
<li>Fixed ticket #5140: The adaptive modules Debug_Level setting now controls the verbosity of messages logged by Adaptive Delivery.</li>
<li>Fixed ticket #5141: Specifying a non-zero binding age results in a time value that newer than the specified number of minutes rather than older.</li>
<li>Fixed ticket #5142: Add --delete-all switch to eccfg commit.  If any files/directories have been deleted using filesystem tools, the user will be prompted to deal with them during commit.</li>
<li>Fixed ticket #5143: Fixed handling of invalid flags during command line argument processing.</li>
<li>Fixed ticket #5150: The reference count for some lua threads would never reach zero, preventing memory and message references held by those threads from being freed.  This could result in some messages being redelivered multiple times.</li>
<li>Fixed ticket #5151: A cron job to save the running config could fail if any unknown files or directories exist in the main conf/ directory.  This would leave conf?????? directories behind in the .../etc directory.</li>
<li>Feature ticket #5152: The &quot;memory&quot; console command will now accept a memory type name as an argument in addition to a memory type number.</li>
<li>Fixed ticket #5157: Sending email to domains that had broken DNS (for example, a CNAME resolving to a CNAME) could result in an active queue which would not expire.</li>
<li>Fixed ticket #5174: The postfix logger could truncate the queueid, and fault if it processed a message that had been EM_FAILED_QUIET.</li>
<li>Fixed ticket #5187: The alerting module now distinguishes between internally generated bounces and externally generated ones.</li>
<li>Fixed ticket #5190: The CSAPI module could leave behind temporary directories in /var/tmp when the server was shut down.</li>
<li>Fixed ticket #5193: Configuration options specified in the Esmtp_Listener scope were not taking effect in the Listen scope.  A workaround for previous releases is to specify the options directly in the Listen scope.</li>
<li>Fixed ticket #5201: Adaptive Delivery will not try to modify settings for suspended bindings.</li>
<li>Fixed ticket #5212: Adaptive Delivery alert mail now includes the reason the alert was triggered as well as a rule-specific message (if applicable).</li>
<li>Fixed ticket #5216: Messages failing during the initial banner with a DNS record that timed out while being added to the active queue could cause a crash.</li>
<li>Fixed ticket #5218: Console commands that produce very large amounts of output could appear to hang after displaying their output while the word completion list was being updated.</li>
<li>Fixed ticket #5223: The delete button in the web UI configuration editor has been relocated to prevent users from accidentally losing their modifications when they click near the scroll bar.</li>
<li>Fixed ticket #5224: scriptlet memory leak each time a script is loaded</li>
<li>Fixed ticket #5227: Fixed a memory leak in the ds_core module.</li>
<li>Fixed ticket #5229: Sieve &quot;address :detail&quot; would actually return &quot;:all&quot; instead.</li>
<li>Fixed ticket #5231: Fixed a LUA runtime error when using the Automated Alerting Configuration in the web console.</li>
<li>Fixed ticket #5235: The Web UI graphs could show little or no activity in certain cases even when there was data that should have been graphed.</li>
<li>Fixed ticket #5243: If multiple subclusters were added during install, it was impossible to continue if a subcluster was added in error.</li>
<li>Fixed ticket #5251: The seedlist module can perform more database queries that it needs to in a clustered environment.  This could result in a large number of failed inserts in the postgres log.</li>
<li>Fixed ticket #5262: ec_vprintf and related functions now correctly handle format strings with multibyte UTF-8 characters</li>
<li>Fixed ticket #5266: Complex regex_binding rules were not handled correctly by the migration script when upgrading from 2.2.</li>
<li>Fixed ticket #5281: Update to latest Apache/apr/apr-util packages.</li>
<li>Fixed ticket #5319: Improved performance under load when a large number of messages are being signed with DKIM/domainkeys.  Previous releases can achieve a similar performance boost by setting the SSL_Lock_Method option to &quot;mutex&quot;.</li>
</ul>
<h2><a name="3.0.16">Momentum 3.0.16 released on 2009-09-18</a></h2>
<ul>
<li>Feature ticket #4764: Update PostgreSQL to 8.3.7 (with replication support)</li>
<li>Fixed ticket #4828: STARTTLS could leak memory allocated to X509 peer certificate.</li>
<li>Fixed ticket #4904: ds_fetch from LDAP datasource could fault if ldap_get_values() returned NULL</li>
<li>Feature ticket #5006: Update PHP to version 5.2.10</li>
<li>Fixed ticket #5021: Fix an error causing the configuration snippet page not to load.</li>
<li>Fixed ticket #5065: Cluster logging could have random directory names in some circumstances.</li>
<li>Fixed ticket #5066: Fix an issue in which the deliveries reporting page could report inaccurate statistics on message size.</li>
<li>Fixed ticket #5070: PHP on Solaris requires an explicit dependency on msys-libxslt</li>
<li>Fixed ticket #5071: Service accounts created on Solaris during installation were configured in a way that prevented cron jobs from executing.  The accounts can be adjusted by executing `passwd -N ecuser`.</li>
<li>Fixed ticket #5106: Some graphs were not displaying data from all bindings.</li>
<li>Fixed ticket #5118: ec_rotate cron job would not get added on Solaris</li>
</ul>
<h2><a name="3.0.15">Momentum 3.0.15 released on 2009-08-10</a></h2>
<ul>
<li>Fixed ticket #4694: The web UI advanced config editor would throw an error when clearing all contents of an array-type option and then clicking the &quot;Update&quot; button.</li>
<li>Fixed ticket #4705: Users assigned to the admin group of the web interface were unable to create or modify existing users.</li>
<li>Fixed ticket #4706: When adding a user within the web interface, if the new username was a substring of (contained within) another existing username in the list of users, then the new user would not appear immediately in the user list.</li>
<li>Fixed ticket #4766: Cluster status page in the web UI would show a node as &quot;Offline&quot; if that node was de-selected from the filters list.</li>
<li>Fixed ticket #4767: ec_rt_stats2 may hang while attempting to connect to the database if the database is restarted at just the wrong time.  This could lead to graph data not appearing in the web UI. Enabled a connection timeout to prevent this from happening.</li>
<li>Fixed ticket #4808: Installer now decouples &#39;web&#39; and &#39;database&#39; roles so you may install a dedicated database server.  It is important that the database server be completely installed first, before any other server is configured (e.g. manager).</li>
<li>Feature ticket #4811: Add timestamp to the installer generated install.log filename so multiple installs/uninstalls in the same directory retain the previous log file.  If you are experiencing installation issues, our support associates would love to have copies of all of those installer log files to aid in their diagnosis.</li>
<li>Fixed ticket #4817: The eccfg command did not properly time out connections to the message bus in the event that the message bus daemon was unreachable.</li>
<li>Fixed ticket #4837: eccfg did not run post-checkout action scripts as root, which meant that changes to mbus.conf would not be picked up by the node without manually restarting the mbus daemon.</li>
<li>Feature ticket #4845: Improved graph database performance by adding a number of indices to the schema.</li>
<li>Fixed ticket #4848: Apache log files (from both the web UI and ecconfigd) were not being rotated.  This is now handled by ec_rotate.</li>
<li>Fixed ticket #4850: eccmgr could get overwhelmed with log move jobs if it had been down for an extended period of time.  It will now back off on log move processing if the number of outstanding jobs exceeds 64k, putting the log move session(s) on hold for 5 seconds.  You may alter the backlog by defining a &quot;log_job&quot; ThreadPool stanza in eccluster.conf and setting the backlog in there.</li>
<li>Fixed ticket #4853: A binding listed in the signing_stats::binding permastore database table that was not present in the current configuration could result in a crash.  This could occur if you removed a binding from your configuration and restarted the ecelerity process.  A workaround is to manually delete either the offending row(s) from the MasterDB_File, or just to delete the MasterDB_File itself.</li>
<li>Fixed ticket #4860: High-throughput connections to the ECStream listener port could prevent Momentum from servicing other listener connections.  The symptoms exhibited include unresponsive ec_console and SMTP connections.  If you are experiencing this issue, you should consider setting ECStream { ECStream_Max_Batch_Size = 10 } to reduce the number of messages that will be processed at one time by the ecstream listener.</li>
<li>Fixed ticket #4861: The lock used to protect the master list of caches has been changed from a spinlock to a mutex.  This improves concurrency when the lock is held, such as when the ec_console cache commands are run.</li>
<li>Fixed ticket #4862: The seedlist module would copy the envelope from address of the seed triggering message, which could present problems for VERP based bounce processing.  The seedlist module now offers a mail_from option that allows you to override the envelope from address of generated seed messages.  A &quot;seedlist_generate_seed&quot; hook is also available to allow custom processing of the seed message prior to injection into the queue subsystem.</li>
<li>Fixed ticket #4866: Suppress spurious error message about a missing database name during upgrade.  The error message can be safely ignored.</li>
<li>Fixed ticket #4867: &quot;Rollback&quot; in the web UI could leave your web UI session with an invalid checkout and prevent you from doing any further useful work until you log out of the UI and back in again.</li>
<li>Fixed ticket #4868: For the SMTP_Extensions option of the ESMTP listener, if the same extension was to be advertised with multiple arguments, only the first one would appear (e.g. configuring &quot;AUTH PLAIN&quot; and &quot;AUTH LOGIN&quot; would only advertise &quot;AUTH PLAIN&quot;). Also, extensions with no arguments (e.g. &quot;ENHANCEDSTATUSCODES&quot;) would be advertised with an extra space before the end of the SMTP response line.</li>
<li>Fixed ticket #4870: A cron job that saves the running config could leave orphaned transactions in the config repo, which could prevent other changes from being committed if left unaddressed.  Any orphaned transaction files will be deleted upon updating to 3.0.15 or later.</li>
<li>Fixed ticket #4876: Disclaimer module could add disclaimer to certain non-text attachments due to improper headers generated by Apple Mail.</li>
<li>Fixed ticket #4877: In the Web UI, the Queues tab on Domain pages failed to display data when the binding filter was implicitly set to all bindings.</li>
<li>Fixed ticket #4881: The &quot;Contains string&quot; operator in the Momentum web UI policy editor did not perform a simple substring search.  Instead, the search string was interpreted as a Lua pattern, in which certain characters have special meaning.  This could result in the operator failing to match when it should.</li>
<li>Fixed ticket #4882: Bounce reasons that violate the SMTP specification by including 8-bit characters would cause the bounce reporting section of the web UI to not show the offending data.  The web UI will now translate those characters into &#39;?&#39; symbols, as the SMTP specification does not provide a way to divine the appropriate character encoding for 8-bit SMTP responses.</li>
<li>Fixed ticket #4883: A cluster node may stop listening on port 4802 after a config reload, which will prevent the cluster manager from collecting logs from the node and will also prevent messages from being moved to the node.  A workaround is to restart the node. When upgrading to 3.0.15, you should upgrade the manager first; the installer will make a change to your ecelerity-cluster.conf file, removing the cluster_listener line and adding an ECCluster_Listener stanza.  Consult the sample-configs/ecelerity-cluster.conf file for an example of how this should look. You will not be able to start the ecelerity process if you do not update your configuration (or let the installer update it for you).</li>
<li>Fixed ticket #4884: Assigning a variable to the result of a function in the Policy Editor could sometimes show up as an undefined entry when the script was opened up for editing, after it had been saved.</li>
<li>Feature ticket #4885: The atomic increment, decrement and addition functions for x86 CPUs are now implemented in a more efficient and NUMA-friendly manner.</li>
<li>Feature ticket #4886: The ec_rt_stats2 script will now distinguish between &quot;no data&quot; and &quot;not enough data&quot; in verbose mode.  This makes it easier to debug situations where ec_rt_stats2 is not moving data from the jlogs into postgres.</li>
<li>Fixed ticket #4889: The rt_stats_watchlist_only variable in ec_rotate.conf did not enable the watchlist_only behavior in ec_rt_stats2.  A workaround for Momentum 3.0.13.0 is to add the -W flag to the ec_rt_stats2 cron job.</li>
<li>Fixed ticket #4890: Domains with no statistical data are no longer stored in the database used by the graphs in the web UI. This may significantly reduce ongoing database disk consumption.</li>
<li>Fixed ticket #4891: The cron job that rolls up statistics used by the web UI now performs its actions on each cluster node concurrently instead of serially.  This can significantly speed up its operation when there are multiple nodes.</li>
<li>Fixed ticket #4892: Added the ability to configure the retention time for the data used to drive the web UI graphs.  This is configured via ec_rotate.conf on the database node.  Consult the documentation for ec_rotate.conf and rollup for more details.</li>
<li>Fixed ticket #4894: The ec_rt_stats2 and rollup scripts now accept the --help and --man options to display the help message and manual page respectively.</li>
<li>Fixed ticket #4896: A missing &quot;uri&quot; in a Datasource stanza would cause a fault on startup.  The workaround is to correctly configure the Datasource stanza with an uri.</li>
<li>Fixed ticket #4899: The &quot;Contains string&quot; operator in the Momentum web UI policy editor did not perform argument validation.  If either the string to be searched or the substring to search for were nil, the scriptlet would fail, logging an error to the paniclog.</li>
<li>Fixed ticket #4908: Invalid login credentials could cause an infinite redirect loop in the web interface.</li>
<li>Fixed ticket #4910: When using the Policy Editor web UI to define rules for the validate_data and validate_data_spool_each_rcpt phase, it would not generate valid return values and instead cause incoming mail to be transiently rejected.</li>
<li>Fixed ticket #4911: Systems with a large IO pool may run into an issue whereby ecelerity maintains many idle connections to the datasource(s) that are in use, which can potentially starve other machines of connections.  You may now specify the thread pool that is used to dispatch datasource queries on a per Datasource basis, so that you can configure the datasource thread pool size independently from the IO pool size.  If unspecified, the system will use the IO pool.</li>
<li>Feature ticket #4913: The &quot;Filter&quot; menu in the web UI now provides &quot;Select All&quot; and &quot;Deselect All&quot; buttons to make it easier to operate on large sets of bindings.</li>
<li>Fixed ticket #4916: Log file corruption might occur if using the customer logger with a concurrency value greater than 1 under load.  This would impact the log file associated with the customer logger in question.</li>
<li>Fixed ticket #4917: The &quot;Matches&quot; and &quot;Doesn&#39;t Match&quot; functions in the web UI Policy Editor don&#39;t properly match data.</li>
<li>Fixed ticket #4922: The &quot;Configuration Snippets&quot; section of the web UI was not displayed in non-cluster deployments</li>
<li>Fixed ticket #4927: The Policy Editor web UI could change a top-level &quot;ALL&quot; into an &quot;ANY&quot; if the conditional block contained nested conditionals</li>
<li>Fixed ticket #4928: Some of the queries that drive the web UI graphs would show inaccurate (zero) results for some time windows.  This was a reporting issue only, and is corrected by adding explicit data conversion operations to the affected queries.</li>
<li>Fixed ticket #4943: Domain names containing special characters such as &#39;[&#39; are now quoted properly by the ec_rt_stats2 command when it processes the logs.</li>
<li>Fixed ticket #4945: Improved line-by-line read performance for modules using the io_wrapper_read_line() API.</li>
<li>Feature ticket #4946: We now include a freetds package in the base install suitable for use with ODBC datasources.</li>
<li>Fixed ticket #4950: The maildir module may not initialize successfully on Solaris systems if the setgid bit is set.</li>
<li>Fixed ticket #4952: YTD buttons on reports pages now display correct interval</li>
<li>Fixed ticket #4956: The Seedlist module leaked ds_core:ecdata_value memory.</li>
<li>Fixed ticket #4957: eccfg could leave stray confXXXXXX directories under /opt/msys/ecelerity/etc if a checkout or update operation times out.  These directories are safe to remove provided that they are not currently in use.</li>
<li>Fixed ticket #4958: We now supervise the ecconfigd daemon process using Gimli, so that it will be respawned automatically if it hangs or dies unexpectedly.</li>
<li>Fixed ticket #4960: The set_variable function in the policy editor generated invalid Lua code.</li>
<li>Fixed ticket #4961: In the Policy Editor, assigning variables to literal values (as opposed to the result of a function call) may generate invalid Lua code.</li>
<li>Fixed ticket #4962: ecconfigd could sometimes exit when processing a subcluster &quot;SLAVES&quot; command, and this would result in eccfg checkout, update or commit operations failing with either a timeout or a 500 internal server error message.</li>
<li>Fixed ticket #4964: The ec_rt_stats2 stats gatherer would refuse to run if ec_rotate.conf was in place and rt_stats_enabled was not explicitly configured.</li>
<li>Fixed ticket #4969: The connection liveness test in the postgres datasource driver could block for extended periods of time, instead of timing out and indicating that the connection had died.  This condition could only trigger in rare circumstances, and would usually time out much sooner.  This has now been changed to time out after a maximum of 25 seconds (but will usually detect a dead connection much sooner).</li>
<li>Fixed ticket #4970: A combination of very long lines and non-canonical line endings in messages being passed through an avengine module could lead to increased CPU utilization and a gradual memory leak if the RFC2822 options to fix the line length and line endings were enabled.  This would be aggravated if the number of configured threads in the IO pool was very large.  The CPU utilization could be avoided by disabling the line ending correction, but this would not resolve the leak associated with the line length correction.</li>
<li>Fixed ticket #4973: The web UI did not delete temporary files associated with a login session, which would cause problems in Internet Explorer if the user logged out and logged back in to the system without closing the browser window.</li>
<li>Fixed ticket #4976: Eliminated misleading warning message thrown when adding new binary files to the configuration repository using eccfg</li>
<li>Fixed ticket #5002: Upgrading a cluster MTA could erroneously install the msys-ecelerity-config-server package, which should only be run on the manager node.  MTA nodes that were upgraded to a release older than 3.0.15 should have the msys-ecelerity-config-server uninstalled or at least disabled from starting on reboot.</li>
</ul>

<h2><a name="3.0.14">Momentum 3.0.14 released on 2009-07-15</a></h2>
<ul>
<li>Fixed ticket #4888: The rollup process could fall behind processing due to missing indices on the real time data tables</li>
<li>Feature ticket #4897: Temporarily set the stats_producer module&#39;s watchlist_only to &quot;true&quot;, to workaround an issue with the quantity of data being passed through to the real time graph process.  This change will be reversed in an upcoming release.</li>
</ul>

<h2><a name="3.0.13">Momentum 3.0.13 released on 2009-07-02</a></h2>
<ul>
<li>Fixed ticket #4503: The web UI would leave a temporary &quot;shim&quot; file on disk for each new session and configuration change.  These files can be removed manually from /tmp.</li>
<li>Fixed ticket #4580: Removing a non-existant SMTP tracer via ec_console would lead to a crash</li>
<li>Fixed ticket #4670: Some networks experience difficulties with ARP traffic when using the DuraVIP clustering feature.  If you are experiencing ARP related issues, you may now set arp_all_hosts = false in your cluster stanza to limit the scope of the ARP traffic generated by DuraVIP moves.</li>
<li>Fixed ticket #4702: The service user &quot;ecuser&quot; is no longer listed in the web UI, as changes to this user will have an adverse affect on the deployment.</li>
<li>Fixed ticket #4707: Expandable items in the Reporting section of the web UI would retain the &quot;+&quot; expander widget after being expanded.  The &quot;+&quot; is now replaced by a &quot;-&quot; to indicate that the item is collapsible.</li>
<li>Fixed ticket #4715: Added locks around swap-out to prevent race conditions for sites with custom modules that act on messages asynchronously and concurrently with swap-out.</li>
<li>Fixed ticket #4776: The instructions on the &#39;Create Snippet&#39; page in the web UI refer to &#39;Global snippets&#39; whereas the dropdowns list &#39;General&#39; snippets. Everything should read as &#39;General&#39;, since they may be used anywhere.</li>
<li>Fixed ticket #4777: The instructions in the snippet management section of the web UI imply that Domain and Binding snippets may only be used in the scopes the snippets are named after. This is not the case, and the wording has been corrected.</li>
<li>Fixed ticket #4780: Improved locking performance when looking up matching scopes (e.g. domains) in the configuration subsystem.</li>
<li>Feature ticket #4789: The stats_producer module and the ec_rt_stats2 script no longer use the watchlist by default as the watchlist makes it more difficult to track domains with an unexpected number of bounces.  Sites with very large numbers of bindings and a highly contended disk subsystem should consider enabling the &quot;watchlist_only&quot; setting in the stats_producer module, and perhaps also in the ec_rotate_conf configuration file.</li>
<li>Fixed ticket #4792: There were two problems when the RFC2822_Lone_LF_in_Body option was set to &quot;fix&quot;.  Firstly, lines with a single dot (&#39;.&#39;) followed by a non-canonical newline were not properly dot-stuffed.  Secondly, if DKIM was enabled, the resulting DKIM signature would be invalid.  A workaround for previous releases is to leave the RFC2822_Lone_LF_in_Body option at its default value, &quot;ignore&quot;.</li>
<li>Fixed ticket #4795: The datasource layer would leak cache statistics during a configuration reload.</li>
<li>Fixed ticket #4798: A change in how the memory counters are updated addresses a performance problem on systems with a NUMA architecture.</li>
<li>Fixed ticket #4802: The script editor in the UI could fail to add an alerting stanza to the configuration, and this could cause the policy scripts to not be applied to the configuration.  The workaround for this was to manually add an empty alerting stanza to the configuration file and commit the change, and then to edit and re-save the policy script in the UI.</li>
<li>Feature ticket #4806: Added the DBD::CSV perl module</li>
<li>Fixed ticket #4810: Added a workaround for a potential fault when the &quot;dnscache&quot; DNS server software is being used.  We still strongly recommend the use of &quot;bind&quot; as a local DNS server.</li>
<li>Fixed ticket #4814: Periodic and Log-based alerting script editors incorrectly displayed &quot;Send an SMTP Trap&quot; instead of &quot;Send an SNMP Trap.&quot; This change is purely cosmetic.</li>
<li>Fixed ticket #4815: Version 3.0.12 introduced a regression with the way that delayed queue counters are maintained, resulting in the delayed queue size being reported as much higher than the true count.</li>
<li>Fixed ticket #4821: The policy editor in the UI would incorrectly display &quot;ALL&quot; as the criteria in an &quot;if&quot; statement when &quot;ANY&quot; was selected.</li>
<li>Fixed ticket #4822: Improved login performance on the web UI.</li>
<li>Fixed ticket #4824: Fixed message move in a clustered configuration.  The change in #4616 to binding group selection logic resulted in messages being assigned to the default binding group when there were no local, unsuspended bindings when the message should have moved to another cluster node.</li>
<li>Fixed ticket #4826: Reduced verbosity in the ecconfigd log file.</li>
<li>Fixed ticket #4827: ECStream injectors were not aware that they needed to reconnect in response to a &quot;Reconfiguration in progress&quot; response from the server, resulting in continual retries that would never succeed being made against the reconfigured server.  The server side has been changed to snip ECStream connections when a reload takes place, and this causes ECStream injectors to retry the message on a new connection.  A workaround for this issue in earlier releases is to restart the ecelerity process when making configuration changes.</li>
<li>Fixed ticket #4831: When using DuraVIP, a possible race condition meant that a &quot;config reload&quot; taking effect on multiple machines at the same time could cause the nodes to disagree about who owns the bindings.  The workaround for this was to &quot;broadcast cluster duravip announce view&quot; from the manager.</li>
<li>Fixed ticket #4832: The web UI inbound connection graph would incorrectly display the peak connection count for any one node in the cluster, rather than the sum of the peak connection counts.  This was a reporting issue only; the data in the database was correct.</li>
<li>Fixed ticket #4834: The web UI &quot;Reporting&quot; tab now displays overall delivery statistics and messages size statistics for all domains across the selected set of nodes and bindings.  The data was present but not displayed in earlier releases.</li>
<li>Fixed ticket #4838: Improved performance of the web UI graphs for sites with large numbers of bindings.</li>
<li>Fixed ticket #4840: The postgresql configuration file has been tuned to improve performance of stats gathering and processing required by the web UI.</li>
<li>Fixed ticket #4842: The latency stats under Deliveries on the Reporting section of the UI were always recorded as zero, even when there was measurable latency.</li>
<li>Fixed ticket #4843: eccfg could not commit changes when made only in the &quot;conf/global&quot; directory, and would require that you also modify files in the &quot;conf&quot; directory for the commit to go through.</li>
<li>Fixed ticket #4851: The real time statistics rollup processing did not correctly honor the data retention times, leading to unbounded database growth over time.  When upgrading the manager to this release, you should plan on the upgrade taking longer than usual while indices are built.  Additionally, you should expect the database performance to be reduced for up to several hours after the upgrade takes place while the retention policy is enforced and the database is vacuumed.  In a cluster configuration, you should upgrade the manager first.  Unless you are using the seedlist functionality in a cluster, the downtime of the manager should not impact service across the cluster--the MTA nodes can continue to run.  Once the upgrade has taken place, service can be resumed.</li>
</ul>

<h2><a name="3.0.12">Momentum 3.0.12 released on 2009-06-05</a></h2>
<ul>
<li>Fixed ticket #4034: Possible memory leak when attempting to query a non-existant SQLite database file.</li>
<li>Fixed ticket #4576: When using the auth_ds module and a datasource query fails, a 535 Sorry message was returned to the sender instead of a 550 Unexpected auth error.</li>
<li>Fixed ticket #4616: Adjusted the binding group selection logic distribute messages evenly amongst the bindings in a group.  The selection logic had favored bindings defined towards the end of the binding group over those defined at the beginning.</li>
<li>Fixed ticket #4620: cluster message moves would unconditionally rebind messages in the scheduler thread, which could lead to a watchdog kill.  If you are experiencing this symptom, you may now set unconditional_rebinding = false in your cluster stanza.</li>
<li>Fixed ticket #4645: Messages being moved internally between cluster nodes could end up being delayed beyond their expiration time with the message &quot;451 4.4.1 [internal] No valid hosts (unable to make any connections)&quot;</li>
<li>Fixed ticket #4684: The installer script, when upgrading, would prompt you to answer questions that it could have inferred from the answers provided on an earlier installation run.</li>
<li>Feature ticket #4697: The product name has changed to Momentum, and this has been reflected throughout the web UI and installer with new styling and revised text.</li>
<li>Fixed ticket #4711: When deleting files or directories from a configuration checkout, eccfg would not perform the delete from the repository, resulting in the deleted files still being visible in other configuration checkouts.</li>
<li>Fixed ticket #4712: ec_rt_stats2 was unable to parse reception lines in the mainlog where either the to or from localparts consisted of a double-quoted string containing &#39;@&#39; characters.  If such a message was received, ec_rt_stats2 would fail with &quot;An error occured: DBD::Pg::db do failed: ERROR:  invalid input syntax for type real&quot; resulting in the web console stats not being updated.  To better handle this rare case, ec_logger will now backslash-escape &#39;@&#39; and backslash characters that are present in the localpart.  The Ecelerity::Log perl class we provide to consume these logs will recognize this and return the original, un-escaped, form to your code.</li>
<li>Fixed ticket #4716: The configuration system would return binding names in lower case when resolving a binding id number to its name.  This resulted in cluster message moves stalling due to being unable to resolve correct routing information, if you have mixed-case binding names.  The workaround is to make your binding names lowercase.</li>
<li>Fixed ticket #4726: Packages were built without optimization, resulting in degraded performance.</li>
<li>Fixed ticket #4727: Optimized locking in the configuration subsystem for improved performance.</li>
<li>Fixed ticket #4729: Adjusted ecstream so that protocol errors are now logged at DINFO level, rather than DDEBUG.</li>
<li>Fixed ticket #4731: Debug information about the signing statistics would periodically get printed to the paniclog.</li>
<li>Fixed ticket #4735: A crash could occur when a host record is recycled after a message has been received but before the server has finished with the message.  This can occur on a heavily loaded server when there is post-reception processing such as 8-bit to 7-bit conversion.  Setting Transform_8BITMIME = no is a partial workaround for this issue in prior releases, though this will violate the RFC.</li>
<li>Fixed ticket #4738: The system could deadlock when using sieve includes for scripts in the set_binding phase and the sieve cache expires while the IO pool is saturated with asynchronous bounce rendering jobs.  In this state, the server is unable to perform binding assignment, and mail is not able to transit the system.  This problem can be worked around in prior releases either by setting async_bounce_rendering to false, or re-structuring your policy to avoid using sieve includes, or increasing the cache_life parameter of the sieve module so that included sieve scripts won&#39;t expire from the cache.</li>
<li>Fixed ticket #4739: Large messages with 8-bit transfer encoding could become corrupted on delivery when sending to a host that does not advertise support for the 8BITMIME SMTP extension.  Setting Transform_8BITMIME = no is a partial workaround for this issue in prior releases, as is increasing your Large_Message_Threshold; the former will violate the RFC, and the latter will result in increased resource consumption while conforming to the RFC.</li>
<li>Fixed ticket #4742: Installation would not succeed on centos 4 systems that did not have the system freetds package installed, due to an incorrect dynamic dependency.  The workaround for this issue was to install the system freetds package.</li>
<li>Fixed ticket #4744: In the web UI &quot;Stats&quot; tab, cluster message move domains do not link to a valid domain summary page, due to an un-escaped &#39;#&#39; sign.</li>
<li>Feature ticket #4746: For standalone installations, configuration changes made by the UI now invoke an explicit eccfg pull.  Prior to this change, you would need to wait approximately one minute for the changes to take effect.</li>
<li>Fixed ticket #4748: Momentum now issues an &quot;eccfg pull&quot; when the service starts, to guarantee that it is running with the most up to date configuration.  This is behavior that went missing in the transition from 2.2 to 3.0.  Prior to this change, the configuration would take approximately 1 minute to be applied.</li>
<li>Fixed ticket #4750: Dashboard graphs on a cluster installation may report exaggerated inbound and outbound data, due to a missing clause in the query that drives that graph.  The data could appear to be number-of-nodes-in-the-cluster times too large, depending on the timing of message throughput and distribution across the cluster.  This was a reporting issue only; the underlying data in the database was not affected.</li>
<li>Fixed ticket #4751: Redefining a DuraVIP Bind_address would sometimes not remove the old DuraVIP interface, even after restarting the process.</li>
<li>Feature ticket #4753: Lua scripts generated by the policy and/or alerting editors in the web UI now warn that these files are not to be modified by hand, as those changes will be lost when the UI is next used to make configuration changes.</li>
<li>Fixed ticket #4754: Certain mbus misconfiguration issues could result the system taking up to 10 minutes to give up and fail to start the ecconfigd service.  The workaround was to correct the mbus misconfiguration.</li>
<li>Fixed ticket #4757: The advanced configuration editor no longer displays the names of configuration scope instances in upper-case, removing ambiguity for case-sensitive names, such as bindings.</li>
<li>Fixed ticket #4758: Systems with a very large number of bindings, under load, could watchdog while generating real time stats data for consumption by the web UI.  A workaround is to disable the real time stats gathering, but the result of this is that you would lose the ability to see the graphs in the web UI.</li>
<li>Fixed ticket #4761: The User Management section of the web UI would not accept passwords with some special punctuation characters in them.</li>
</ul>

<h2><a name="3.0.11">Delivery Manager 3.0.11 released on 2009-05-12</a></h2>
<ul>
<li>Fixed ticket #4569: Duravip-enabled Bindings in a Binding_Group would be detected as misconfigured even when they were configured properly, and this would prevent ecelerity from starting up.</li>
<li>Fixed ticket #4597: Logging into the web UI with no bindings configured would sometimes cause an XML parse error message to be displayed</li>
<li>Fixed ticket #4622: The ecxs module compilation tool used ccache, which is not included in the installation bundle, and meant that users would need to modify that script to allow their custom modules to compile.</li>
<li>Fixed ticket #4623: ESMTP_Listener AuthDigestMD5Parameters, AuthLoginParameters, AuthPlainParameters and AuthCramMD5Parameters options could not be configured in the Pathway_Group, Pathway, Listen and Peer scopes unless the supporting modules were explicitly loaded in the configuration file.</li>
<li>Fixed ticket #4624: The Goodmail Imprinter module was missing its manifest (.ecm) file, and this prevented it from being loaded.</li>
<li>Fixed ticket #4625: Bindings in a Binding_Group configured with Duravip_Enable or Duravip_Preference would prevent ecelerity from starting up if those stanzas preceded the cluster module stanza.</li>
<li>Fixed ticket #4626: The persist_io module would fault on startup if the persist_path option was not explicitly configured in it.</li>
<li>Fixed ticket #4627: The seedlist module did not declare that it requires the datasource subsystem, and this would prevent ecelerity from starting up if the seedlist stanza preceded the Datasource stanza.</li>
<li>Fixed ticket #4629: The advanced configuration editor in the web UI would allow you to save a configuration snippet with no name, and this would later cause problems working with the web UI.</li>
<li>Feature ticket #4630: Ecconfigd no longer requires fully qualified host name to operate.</li>
<li>Fixed ticket #4631: ec_migrate_conf would not correctly translate duravip attributes for Bindings contained inside Binding_Group stanzas.</li>
<li>Fixed ticket #4632: Complex, multi-segment, mbus.conf files could confuse the web UI, resulting in it only showing only the nodes from the last segment corresponding to a sub-cluster.</li>
<li>Fixed ticket #4633: Migrating large config repositories from 2.2 eccmgr could result in ecconfigd ending up in a conflicted state if you committed changes before the migrated repository had completed its sync.</li>
<li>Fixed ticket #4634: The installer now prompts for a netmask for each node being configured in a cluster; previously it would default to /24.</li>
<li>Feature ticket #4640: Added RFC2822_Lone_LF_in_Body = &#39;fix&#39; to canonicalize newlines in the message body.  Customers who have custom modules that modify ec_message_parser_parameters directly will need to recompile the affected modules.</li>
<li>Fixed ticket #4643: eccfg now uses &quot;cp&quot; instead of &quot;pax&quot; when making a copy of the existing checkout.</li>
<li>Fixed ticket #4646: Make ecconfigd more robust in dealing with momentary Spread problems.</li>
<li>Fixed ticket #4649: When configuring a sieve script that uses the ds_fetch action, the web UI Advanced Configuration Editor would display an error, and spurious &quot;Unsupported or unknown action ds_fetch&quot; errors appear in the paniclog.  These error messages were logged by the config_shim component of the web UI and did not impact operation of the MTA, but resulted in a poor user experience in the web UI.  These would occur when taking any actions on the web console (even just logging in).</li>
<li>Feature ticket #4651: Add swaks - an SMTP testing script - to the main distribution</li>
<li>Fixed ticket #4652: The web UI configuration editor could not be used to add new sieve scripts to the configuration.  Also improved configuration error reporting in the sieve module.</li>
<li>Fixed ticket #4660: The Advanced Config Editor in the web UI would fail to show all available options in a given scope in some situations</li>
<li>Fixed ticket #4662: Reports would show no additional data (or uncorrelated data) upon expanding domains or viewing the Transfailures or Bounces tabs on the dashboard if the timezone configuration on the nodes were not all consistent.</li>
<li>Fixed ticket #4663: The total number of messages in the delayed queue for a domain was being displayed instead of the per-binding statistics in the output of the &quot;mailq&quot; command and thus the &quot;Stats&quot; tabs in the web UI</li>
<li>Fixed ticket #4664: The outbound_audit module could free the same memory location twice during a config reload.</li>
<li>Fixed ticket #4665: The webui config helper would log heartbeats to the mainlog, rejectlog and bouncelog every time it was run, causing heartbeats to appear more often than configured.</li>
<li>Fixed ticket #4668: The cluster module could free the same address twice during a config reload.</li>
<li>Fixed ticket #4669: Fixed a race condition during spool import that could prevent the import from completing.</li>
<li>Fixed ticket #4671: The installer no longer installs the message bus component for singlenode installs</li>
<li>Fixed ticket #4678: Some SuSE 10 systems were unable to initialize the msyspg database without manual intervention.</li>
<li>Fixed ticket #4679: The mailq command (which powers the &quot;Stats&quot; tabs in the web UI) could take a very long time to produce its results on systems with large numbers of bindings, and this could trigger a watchdog kill.</li>
<li>Fixed ticket #4680: Sites with large numbers of bindings and a highly contended disk subsystem could fall behind with real-time stats processing.  This manifested as high memory usage in the ec_rt_stats2 process and increased disk usage for the associated jlogs.  The root of the problem was the amount of data recorded by the statp module, and this has now been adjusted to check the domain watchlist earlier in the stats gathering process.</li>
<li>Fixed ticket #4681: The custom_logger %T{0} format printed a trailing decimal point even though the number of decimal places was set to zero.</li>
</ul>
</div>
